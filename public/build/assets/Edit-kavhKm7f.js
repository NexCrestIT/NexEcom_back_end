import{u as A,r as R,c as _,bi as g,a as u,o as c,b as a,d as l,h as B,e as b,f as s,g as k,i as M,n as N,t as p,F as x,l as $,k as F}from"./app-g_uq3P9Q.js";import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-C66E4Wtv.js";import{_ as U}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjP68X9r.js";import{s as E}from"./index-B_MRzLld.js";import{s as D}from"./index-DW7toPKJ.js";import{s as h}from"./index-KNfTspns.js";import{_ as z,s as L,a as T,b as q,c as G}from"./_plugin-vue_export-helper-Dfc1XDLr.js";import"./index-dWEWYs2j.js";import"./useForwardExpose-CxWsbAvG.js";import"./VisuallyHidden-BIE4ZmuB.js";import"./RovingFocusGroup-DoPalDKS.js";import"./createLucideIcon-Cn-To4t-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DA5wfV1C.js";import"./index-Cnk_WgH2.js";import"./index-BTXEjMSh.js";import"./index-CPL-5HGm.js";const H={class:"flex flex-col gap-4 p-6"},J={class:"rounded-lg border border-border bg-card p-6"},K={class:"flex flex-col gap-2"},Q={class:"flex flex-col gap-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center gap-4"},Y={class:"flex items-center gap-2 cursor-pointer select-none"},Z={class:"text-muted-foreground"},ee={key:0,class:"text-center py-4 text-muted-foreground"},se={key:1,class:"flex flex-col gap-4"},te={class:"flex items-center justify-between w-full pr-4"},le={class:"flex items-center gap-3"},oe={class:"font-semibold"},ie={class:"text-xs px-2 py-0.5 rounded-full bg-primary/10 text-primary"},re=["onClick"],ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4"},ne=["onClick"],de={class:"text-sm cursor-pointer flex-1"},ce={class:"flex justify-end gap-2 mt-4"},me={__name:"Edit",props:{role:{type:Object,default:()=>({})},permissions:{type:Object,default:()=>({})}},setup(S){const d=S,o=A({name:d.role?.name||"",guard_name:d.role?.guard_name||"web",permissions:d.role?.permissions?d.role.permissions.map(t=>t.id):[]});R([]);const j=_(()=>[{title:"Dashboard",href:g("dashboard")},{title:"Roles",href:g("admin.roles.index")},{title:"Edit Role",href:g("admin.roles.edit",d.role?.id)}]),m=_(()=>{const t={};return Object.keys(d.permissions).forEach(e=>{t[e]=d.permissions[e].map(i=>({id:i.id,name:i.name,module:i.module}))}),t}),C=t=>{const e=o.permissions.indexOf(t);e>-1?o.permissions.splice(e,1):o.permissions.push(t)},f=t=>o.permissions.includes(t),w=t=>{const e=m.value[t]||[];e.every(r=>f(r.id))?e.forEach(r=>{const n=o.permissions.indexOf(r.id);n>-1&&o.permissions.splice(n,1)}):e.forEach(r=>{f(r.id)||o.permissions.push(r.id)})},O=t=>{const e=m.value[t]||[];return e.length===0?!1:e.every(i=>f(i.id))},v=_(()=>Object.values(m.value).reduce((t,e)=>t+e.length,0)),y=_(()=>v.value===0?!1:o.permissions.length===v.value),P=()=>{if(y.value)o.permissions=[];else{const t=[];Object.values(m.value).forEach(e=>{e.forEach(i=>t.push(i.id))}),o.permissions=t}};function I(){o.put(g("admin.roles.update",d.role.id),{preserveScroll:!0})}return(t,e)=>(c(),u(x,null,[a(l(B),{title:"Edit Role"}),a(U,{title:"Edit Role",breadcrumbs:j.value},{default:b(()=>[s("div",H,[s("div",J,[s("form",{onSubmit:k(I,["prevent"]),class:"flex flex-col gap-6"},[s("div",K,[e[2]||(e[2]=s("label",{for:"name",class:"text-sm font-medium"},[M("Role Name "),s("span",{class:"text-red-500"},"*")],-1)),a(l(D),{id:"name",modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=i=>l(o).name=i),placeholder:"Enter role name (e.g., Admin, Manager)...",class:N({"p-invalid":l(o).errors.name}),"aria-describedby":"name-help"},null,8,["modelValue","class"]),a(V,{message:l(o).errors.name},null,8,["message"])]),s("div",Q,[s("div",W,[e[4]||(e[4]=s("label",{class:"text-sm font-medium"},"Permissions",-1)),s("div",X,[s("label",Y,[a(l(h),{modelValue:y.value,binary:!0,"onUpdate:modelValue":P},null,8,["modelValue"]),e[3]||(e[3]=s("span",{class:"text-sm font-medium"}," Select All ",-1))]),s("small",Z,"Selected: "+p(l(o).permissions.length)+"/"+p(v.value),1)])]),Object.keys(m.value).length===0?(c(),u("div",ee," No permissions available ")):(c(),u("div",se,[(c(!0),u(x,null,$(m.value,(i,r)=>(c(),F(l(L),{key:r,value:[r],multiple:"",class:"rounded-xl border border-border bg-card shadow-sm overflow-hidden"},{default:b(()=>[a(l(T),{value:r},{default:b(()=>[a(l(q),{class:"bg-muted/40 hover:bg-muted/60 transition-colors"},{default:b(()=>[s("div",te,[s("div",le,[s("span",oe,p(r),1),s("span",ie,p(i.filter(n=>f(n.id)).length)+"/"+p(i.length),1)]),s("div",{class:"flex items-center gap-2 cursor-pointer",onClick:k(n=>w(r),["stop"])},[a(l(h),{inputId:`select-all-${r}`,modelValue:O(r),binary:!0},null,8,["inputId","modelValue"]),e[5]||(e[5]=s("label",{class:"text-sm cursor-pointer"}," Select All ",-1))],8,re)])]),_:2},1024),a(l(G),null,{default:b(()=>[s("div",ae,[(c(!0),u(x,null,$(i,n=>(c(),u("div",{key:n.id,class:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",onClick:ue=>C(n.id)},[a(l(h),{inputId:`permission-${n.id}`,modelValue:f(n.id),binary:!0},null,8,["inputId","modelValue"]),s("label",de,p(n.name),1)],8,ne))),128))])]),_:2},1024)]),_:2},1032,["value"])]),_:2},1032,["value"]))),128))])),a(V,{message:l(o).errors.permissions},null,8,["message"])]),s("div",ce,[a(l(E),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:e[1]||(e[1]=i=>t.$inertia.visit(l(g)("admin.roles.index")))}),a(l(E),{type:"submit",label:"Update Role",loading:l(o).processing,disabled:l(o).processing},null,8,["loading","disabled"])])],32)])])]),_:1},8,["breadcrumbs"])],64))}},Pe=z(me,[["__scopeId","data-v-1a09308f"]]);export{Pe as default};

import{r,c as g,q as le,a as n,o,b as a,d as i,h as ae,e as u,f as s,s as ie,k as T,j as $,t as b,v as L,F as oe,p}from"./app-BK2Pf2Of.js";import{C as d,_ as re}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{s as ne,a as m}from"./index-BwoVAJgh.js";import{s as A}from"./index-ByAzzK9e.js";import{s as ue}from"./index-CbgF3ImK.js";import{s as de}from"./index-jPdbgPEm.js";import{s as ce}from"./index-NBNEWn_O.js";import{s as ve}from"./index-DR1Syb5x.js";import{_ as E}from"./DeleteConfirmationModal-C5XRjHbV.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DpBsBaFy.js";import"./index-vBjVw-4p.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";import"./index-BRHAo3_x.js";import"./index-DFN163rb.js";import"./index-B1miUTR4.js";import"./index-ClpF-97P.js";import"./index-BQA8nYZt.js";import"./index-BWwgyFsG.js";const me={class:"flex flex-col gap-6 p-6"},fe={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},he={class:"w-full sm:w-auto search-input-wrapper"},be={class:"flex gap-2"},xe={class:"relative inline-block"},ge={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},ye={class:"relative inline-block"},_e={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},we={class:"data-table-container"},ke={class:"overflow-x-auto"},Ce={key:0,class:"text-center py-12"},De={class:"flex items-center h-full"},Se={class:"text-sm text-gray-600"},Ae={class:"flex flex-col"},$e={class:"font-medium text-gray-900"},Ve={key:0,class:"text-xs text-gray-500 truncate max-w-xs"},Fe={key:0,class:"text-sm text-gray-700"},Le={key:1,class:"text-xs text-gray-400"},Pe={class:"flex items-center h-full"},Be=["src","alt"],Ue={key:1,class:"pi pi-image text-2xl text-gray-400"},je={class:"text-sm text-gray-600"},Re={class:"flex items-center gap-3"},Te=["onClick"],Ee=["onClick"],Ie=["onClick"],Ne={class:"flex flex-col gap-6"},Me={class:"flex flex-col gap-3"},Oe={class:"flex gap-3 pt-4 border-t"},Ke={__name:"Index",props:{carousels:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,search:null})}},setup(I){const x=I,y=r(x.filters?.search||""),c=r([]),P=r(0),V=r(10),F=r(!1),v=r({isActive:x.filters?.is_active?Array.isArray(x.filters.is_active)?x.filters.is_active:[x.filters.is_active]:[]}),N=[{label:"Active",value:!0},{label:"Inactive",value:!1}],_=r(!1),f=r(!1),w=r(null),k=r(""),C=r(!1),h=r(!1),B=g(()=>x.carousels),M=g(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Carousels",href:d.index.url()}]),U=g(()=>{let l=0;return v.value.isActive&&v.value.isActive.length>0&&l++,l}),O=l=>P.value*V.value+l+1,K=l=>{P.value=l.page,V.value=l.rows},q=()=>{p.visit(d.create.url())},z=l=>{p.visit(d.show.url(l))},G=l=>{p.visit(d.edit.url(l))},H=(l,e)=>{w.value=l,k.value=e,_.value=!0,f.value=!1},J=()=>{w.value&&(f.value=!0,p.delete(d.destroy.url(w.value),{preserveScroll:!0,onSuccess:()=>{f.value=!1,_.value=!1,w.value=null,k.value=""},onError:()=>{f.value=!1},onFinish:()=>{f.value=!1}}))},Q=()=>{_.value=!1,w.value=null,k.value="",f.value=!1},W=g(()=>k.value?`Are you sure you want to delete the carousel "${k.value}"? This action cannot be undone.`:"Are you sure you want to delete this carousel? This action cannot be undone."),X=l=>{p.post(d.toggleStatus.url(l),{},{preserveScroll:!0})},Y=()=>{C.value=!0,h.value=!1},Z=()=>{h.value=!0;const l=c.value.map(e=>e.id);p.post(d.bulkDelete.url(),{ids:l},{preserveScroll:!0,onSuccess:()=>{h.value=!1,C.value=!1,c.value=[]},onError:()=>{h.value=!1},onFinish:()=>{h.value=!1}})},ee=()=>{C.value=!1,h.value=!1},te=g(()=>{const l=c.value.length;return l===0?"":`Are you sure you want to delete ${l} ${l===1?"carousel":"carousels"}?`}),j=g(()=>c.value&&c.value.length>0),R=()=>{const l=new URLSearchParams;y.value&&l.append("search",y.value),v.value.isActive&&v.value.isActive.length>0&&v.value.isActive.forEach(D=>{l.append("is_active[]",D)});const e=`${d.index.url()}?${l.toString()}`;p.visit(e,{preserveScroll:!0})},se=()=>{y.value="",v.value.isActive=[],p.visit(d.index.url(),{preserveScroll:!0})};return(l,e)=>{const D=le("tooltip");return o(),n(oe,null,[a(i(ae),{title:"Carousels"}),a(re,{title:"Carousels",breadcrumbs:M.value},{default:u(()=>[s("div",me,[s("div",fe,[s("div",he,[e[8]||(e[8]=s("i",{class:"pi pi-search search-icon"},null,-1)),a(i(ue),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),placeholder:"Search by title or subtitle",class:"w-full",onKeyup:ie(R,["enter"])},null,8,["modelValue"])]),s("div",be,[s("div",xe,[j.value?(o(),T(i(A),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:Y})):$("",!0),j.value?(o(),n("span",ge,b(c.value.length),1)):$("",!0)]),s("div",ye,[a(i(A),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>F.value=!0)}),U.value>0?(o(),n("span",_e,b(U.value),1)):$("",!0)]),a(i(A),{label:"Add Carousel",icon:"pi pi-plus",severity:"primary",onClick:q,class:"flex-shrink-0"})])]),s("div",we,[s("div",ke,[B.value.length===0?(o(),n("div",Ce,[...e[9]||(e[9]=[s("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),s("p",{class:"text-gray-500"},"No carousels found",-1)])])):(o(),T(i(ne),{key:1,value:B.value,paginator:!0,rows:V.value,rowsPerPageOptions:[5,10,20,50],selection:c.value,"onUpdate:selection":e[3]||(e[3]=t=>c.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["title","subtitle"],onPage:K},{default:u(()=>[a(i(m),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(m),{header:"#",style:{width:"60px"}},{body:u(t=>[s("div",De,[s("span",Se,b(O(t.index)),1)])]),_:1}),a(i(m),{field:"title",header:"Title",sortable:!0},{body:u(t=>[s("div",Ae,[s("span",$e,b(t.data.title),1),t.data.subtitle?(o(),n("span",Ve,b(t.data.subtitle),1)):$("",!0)])]),_:1}),a(i(m),{field:"button_name",header:"Button",sortable:!0,style:{width:"150px"}},{body:u(t=>[t.data.button_name?(o(),n("span",Fe,b(t.data.button_name),1)):(o(),n("span",Le,"-"))]),_:1}),a(i(m),{field:"image",header:"Image",sortable:!0,style:{width:"120px"}},{body:u(t=>[s("div",Pe,[t.data.image_url?(o(),n("img",{key:0,src:t.data.image_url,alt:t.data.title,class:"w-16 h-10 object-cover rounded",onError:e[2]||(e[2]=S=>S.target.style.display="none")},null,40,Be)):(o(),n("i",Ue))])]),_:1}),a(i(m),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:u(t=>[a(i(de),{modelValue:t.data.is_active,"onUpdate:modelValue":S=>X(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(m),{field:"created_at",header:"Created",sortable:!0,style:{width:"150px"}},{body:u(t=>[s("span",je,b(new Date(t.data.created_at).toLocaleDateString()),1)]),_:1}),a(i(m),{header:"Actions",style:{width:"100px"}},{body:u(t=>[s("div",Re,[L((o(),n("button",{onClick:S=>z(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[10]||(e[10]=[s("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Te)),[[D,"View",void 0,{top:!0}]]),L((o(),n("button",{onClick:S=>G(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[11]||(e[11]=[s("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Ee)),[[D,"Edit",void 0,{top:!0}]]),L((o(),n("button",{onClick:S=>H(t.data.id,t.data.title),class:"text-red-600 cursor-pointer"},[...e[12]||(e[12]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Ie)),[[D,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(E,{visible:_.value,"onUpdate:visible":e[4]||(e[4]=t=>_.value=t),title:"Delete Carousel",message:W.value,loading:f.value,onConfirm:J,onCancel:Q},null,8,["visible","message","loading"]),a(E,{visible:C.value,"onUpdate:visible":e[5]||(e[5]=t=>C.value=t),title:"Delete Carousels",message:te.value,loading:h.value,onConfirm:Z,onCancel:ee},null,8,["visible","message","loading"]),a(i(ce),{visible:F.value,"onUpdate:visible":e[7]||(e[7]=t=>F.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:u(()=>[...e[13]||(e[13]=[s("div",{class:"flex items-center justify-between w-full pr-8"},[s("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),default:u(()=>[s("div",Ne,[s("div",Me,[e[14]||(e[14]=s("label",{class:"font-medium text-gray-700"},"Status",-1)),a(i(ve),{modelValue:v.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=t=>v.value.isActive=t),options:N,optionLabel:"label",optionValue:"value",placeholder:"Select status",class:"w-full"},null,8,["modelValue"])]),s("div",Oe,[a(i(A),{label:"Apply",icon:"pi pi-check",severity:"primary",class:"flex-1",onClick:R}),a(i(A),{label:"Reset",icon:"pi pi-refresh",severity:"secondary",class:"flex-1",onClick:se})])])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}},bt=pe(Ke,[["__scopeId","data-v-51e43f9a"]]);export{bt as default};

import{r as u,c as g,q as de,a as p,o as d,b as a,d as i,h as ce,e as n,f as l,s as ve,k as P,j as S,t as x,v as T,i as pe,F as fe,p as f}from"./app-BK2Pf2Of.js";import{A as v,_ as me}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{s as be,a as m}from"./index-BwoVAJgh.js";import{s as C}from"./index-ByAzzK9e.js";import{s as ye}from"./index-CbgF3ImK.js";import{s as R}from"./index-jPdbgPEm.js";import{s as xe}from"./index-NBNEWn_O.js";import{s as U}from"./index-DR1Syb5x.js";import{s as O}from"./index-CR7_FjNV.js";import{_ as q}from"./DeleteConfirmationModal-C5XRjHbV.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DpBsBaFy.js";import"./index-vBjVw-4p.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";import"./index-BRHAo3_x.js";import"./index-DFN163rb.js";import"./index-B1miUTR4.js";import"./index-ClpF-97P.js";import"./index-BQA8nYZt.js";import"./index-BWwgyFsG.js";const ge={class:"flex flex-col gap-6 p-6"},he={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},_e={class:"w-full sm:w-auto search-input-wrapper"},we={class:"flex gap-2"},ke={class:"relative inline-block"},Ae={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Fe={class:"relative inline-block"},Ve={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Se={class:"data-table-container"},Ce={class:"overflow-x-auto"},De={key:0,class:"text-center py-12"},$e={class:"flex items-center h-full"},Ne={class:"text-sm text-gray-600"},Te={class:"flex items-center h-full"},Ue={class:"flex flex-col"},Le={class:"font-medium text-gray-900"},Be={key:0,class:"text-xs text-gray-500 truncate max-w-xs"},je={class:"flex items-center gap-3"},Me=["onClick"],Pe=["onClick"],Re=["onClick"],Oe={class:"flex flex-col gap-6"},qe={class:"flex flex-col gap-2"},Ee={class:"flex flex-col gap-2"},Ie={class:"flex flex-col gap-2"},Ke={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Ye={class:"flex gap-2 justify-end"},gt={__name:"Index",props:{attributes:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({type:null,is_active:null,is_filterable:null,search:null})}},setup(E){const o=E,h=u(o.filters?.search||""),c=u([]),L=u(0),$=u(10),_=u(!1),r=u({type:o.filters?.type?Array.isArray(o.filters.type)?o.filters.type:[o.filters.type]:[],isActive:o.filters?.is_active?Array.isArray(o.filters.is_active)?o.filters.is_active:[o.filters.is_active]:[],isFilterable:o.filters?.is_filterable?Array.isArray(o.filters.is_filterable)?o.filters.is_filterable:[o.filters.is_filterable]:[]}),I=[{label:"Text",value:"text"},{label:"Number",value:"number"},{label:"Select",value:"select"},{label:"Multiselect",value:"multiselect"},{label:"Boolean",value:"boolean"},{label:"Date",value:"date"},{label:"Textarea",value:"textarea"}],K=[{label:"Active",value:!0},{label:"Inactive",value:!1}],Y=[{label:"Filterable",value:!0},{label:"Not Filterable",value:!1}],w=u(!1),b=u(!1),k=u(null),A=u(""),F=u(!1),y=u(!1),B=g(()=>o.attributes),z=g(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Attributes",href:v.index.url()}]),G=s=>L.value*$.value+s+1,H=s=>{L.value=s.page,$.value=s.rows},J=s=>{f.visit(v.show.url(s))},Q=s=>{f.visit(v.edit.url(s))},W=(s,e)=>{k.value=s,A.value=e,w.value=!0,b.value=!1},X=()=>{k.value&&(b.value=!0,f.delete(v.destroy.url(k.value),{preserveScroll:!0,onSuccess:()=>{b.value=!1,w.value=!1,k.value=null,A.value=""},onError:()=>{b.value=!1},onFinish:()=>{b.value=!1}}))},Z=()=>{w.value=!1,k.value=null,A.value="",b.value=!1},ee=g(()=>A.value?`Are you sure you want to delete "${A.value}"?`:"Are you sure you want to delete this attribute?"),te=()=>{f.visit(v.create.url())},le=s=>{f.post(v.toggleStatus.url(s),{},{preserveScroll:!0})},se=s=>{f.post(v.toggleFilterable.url(s),{},{preserveScroll:!0})},V=g(()=>{let s=0;return r.value.type&&r.value.type.length>0&&s++,r.value.isActive&&r.value.isActive.length>0&&s++,r.value.isFilterable&&r.value.isFilterable.length>0&&s++,s}),j=(s=!0)=>{const e={};r.value.type&&r.value.type.length>0&&(e.type=r.value.type),r.value.isActive&&r.value.isActive.length>0&&(e.is_active=r.value.isActive),r.value.isFilterable&&r.value.isFilterable.length>0&&(e.is_filterable=r.value.isFilterable),h.value&&(e.search=h.value),f.get(v.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s&&(_.value=!1)}})},ae=()=>{r.value={type:[],isActive:[],isFilterable:[]},h.value="",f.get(v.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{_.value=!1}})},ie=()=>{c.value.length!==0&&(F.value=!0,y.value=!1)},re=()=>{if(c.value.length===0)return;y.value=!0;const s=c.value.map(e=>e.id);f.post(v.bulkDelete.url(),{ids:s},{preserveScroll:!0,onSuccess:()=>{y.value=!1,F.value=!1,c.value=[]},onError:()=>{y.value=!1},onFinish:()=>{y.value=!1}})},oe=()=>{F.value=!1,y.value=!1},ue=g(()=>{const s=c.value.length;return s===0?"":`Are you sure you want to delete ${s} ${s===1?"attribute":"attributes"}?`}),M=g(()=>c.value&&c.value.length>0),ne=s=>({text:"info",number:"warning",select:"success",multiselect:"success",boolean:"secondary",date:"help",textarea:"info"})[s]||"secondary";return(s,e)=>{const N=de("tooltip");return d(),p(fe,null,[a(i(ce),{title:"Attributes"}),a(me,{title:"Attributes",breadcrumbs:z.value},{default:n(()=>[l("div",ge,[l("div",he,[l("div",_e,[e[9]||(e[9]=l("i",{class:"pi pi-search search-icon"},null,-1)),a(i(ye),{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t),placeholder:"Search",class:"w-full",onKeyup:ve(j,["enter"])},null,8,["modelValue"])]),l("div",we,[l("div",ke,[M.value?(d(),P(i(C),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:ie})):S("",!0),M.value?(d(),p("span",Ae,x(c.value.length),1)):S("",!0)]),l("div",Fe,[a(i(C),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>_.value=!0)}),V.value>0?(d(),p("span",Ve,x(V.value),1)):S("",!0)]),a(i(C),{label:"Add Attribute",icon:"pi pi-plus",severity:"primary",onClick:te,class:"flex-shrink-0"})])]),l("div",Se,[l("div",Ce,[B.value.length===0?(d(),p("div",De,[...e[10]||(e[10]=[l("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),l("p",{class:"text-gray-500"},"No attributes found",-1)])])):(d(),P(i(be),{key:1,value:B.value,paginator:!0,rows:$.value,rowsPerPageOptions:[5,10,20,50],selection:c.value,"onUpdate:selection":e[2]||(e[2]=t=>c.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","description"],onPage:H},{default:n(()=>[a(i(m),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(m),{header:"#",style:{width:"60px"}},{body:n(t=>[l("div",$e,[l("span",Ne,x(G(t.index)),1)])]),_:1}),a(i(m),{field:"name",header:"Attribute Name",sortable:!0},{body:n(t=>[l("div",Te,[l("div",Ue,[l("span",Le,x(t.data.name),1),t.data.description?(d(),p("span",Be,x(t.data.description),1)):S("",!0)])])]),_:1}),a(i(m),{field:"type",header:"Type",sortable:!0,style:{width:"120px"}},{body:n(t=>[a(i(O),{value:t.data.type,severity:ne(t.data.type),class:"text-xs"},null,8,["value","severity"])]),_:1}),a(i(m),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:n(t=>[a(i(R),{modelValue:t.data.is_active,"onUpdate:modelValue":D=>le(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(m),{field:"is_filterable",header:"Filterable",sortable:!0,sortField:"is_filterable",style:{width:"120px"}},{body:n(t=>[a(i(R),{modelValue:t.data.is_filterable,"onUpdate:modelValue":D=>se(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(m),{field:"is_required",header:"Required",sortable:!0,style:{width:"100px"}},{body:n(t=>[a(i(O),{value:t.data.is_required?"Yes":"No",severity:t.data.is_required?"danger":"secondary",class:"text-xs"},null,8,["value","severity"])]),_:1}),a(i(m),{header:"Actions",style:{width:"100px"}},{body:n(t=>[l("div",je,[T((d(),p("button",{onClick:D=>J(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[11]||(e[11]=[l("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Me)),[[N,"View",void 0,{top:!0}]]),T((d(),p("button",{onClick:D=>Q(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[12]||(e[12]=[l("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Pe)),[[N,"Edit",void 0,{top:!0}]]),T((d(),p("button",{onClick:D=>W(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[13]||(e[13]=[l("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Re)),[[N,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(q,{visible:w.value,"onUpdate:visible":e[3]||(e[3]=t=>w.value=t),title:"Delete Attribute",message:ee.value,loading:b.value,onConfirm:X,onCancel:Z},null,8,["visible","message","loading"]),a(q,{visible:F.value,"onUpdate:visible":e[4]||(e[4]=t=>F.value=t),title:"Delete Attributes",message:ue.value,loading:y.value,onConfirm:re,onCancel:oe},null,8,["visible","message","loading"]),a(i(xe),{visible:_.value,"onUpdate:visible":e[8]||(e[8]=t=>_.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:n(()=>[...e[14]||(e[14]=[l("div",{class:"flex items-center justify-between w-full pr-8"},[l("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:n(()=>[l("div",Ye,[a(i(C),{label:"Reset",severity:"secondary",outlined:"",onClick:ae}),a(i(C),{label:"Apply Filters",severity:"primary",onClick:j})])]),default:n(()=>[l("div",Oe,[l("div",qe,[e[15]||(e[15]=l("label",{class:"text-sm font-medium text-gray-700"},"Type",-1)),a(i(U),{modelValue:r.value.type,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.type=t),options:I,optionLabel:"label",optionValue:"value",placeholder:"Select Types",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),l("div",Ee,[e[16]||(e[16]=l("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),a(i(U),{modelValue:r.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.isActive=t),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),l("div",Ie,[e[17]||(e[17]=l("label",{class:"text-sm font-medium text-gray-700"},"Filterable",-1)),a(i(U),{modelValue:r.value.isFilterable,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.isFilterable=t),options:Y,optionLabel:"label",optionValue:"value",placeholder:"Select Filterable",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),V.value>0?(d(),p("div",Ke,[e[18]||(e[18]=l("i",{class:"pi pi-info-circle mr-2"},null,-1)),pe(" "+x(V.value)+" "+x(V.value===1?"filter":"filters")+" active ",1)])):S("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{gt as default};

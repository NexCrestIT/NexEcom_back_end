import{u as A,r as R,c as b,z as f,a as m,o as d,b as a,d as l,h as B,e as g,f as s,g as k,i as M,n as N,t as u,F as v,l as C,k as F}from"./app-CsZvk_OI.js";import{_ as $}from"./InputError.vue_vue_type_script_setup_true_lang-DzfEWuDR.js";import{_ as z}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CfI51x6S.js";import{s as V}from"./index-BYFlyxjJ.js";import{s as D}from"./index-1iZKgu-n.js";import{s as x}from"./index-no0rzq44.js";import{_ as U,s as L,a as T,b as q,c as G}from"./_plugin-vue_export-helper-Dng1l2Da.js";import"./index-BqkInGoY.js";import"./useForwardExpose-CrRxdZzL.js";import"./VisuallyHidden-DGCGjvMv.js";import"./RovingFocusGroup-CF8qITZY.js";import"./createLucideIcon-3cHpo18T.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-Cy9aq3qC.js";import"./index-BGq02r0v.js";import"./index-CnAWc-ET.js";import"./index-Bzv5bibZ.js";const H={class:"flex flex-col gap-4 p-6"},J={class:"rounded-lg border border-border bg-card p-6"},K={class:"flex flex-col gap-2"},Q={class:"flex flex-col gap-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center gap-4"},Y={class:"flex items-center gap-2 cursor-pointer select-none"},Z={class:"text-muted-foreground"},ee={key:0,class:"text-center py-4 text-muted-foreground"},se={key:1,class:"flex flex-col gap-4"},te={class:"flex items-center justify-between w-full pr-4"},le={class:"flex items-center gap-3"},oe={class:"font-semibold"},re={class:"text-xs px-2 py-0.5 rounded-full bg-primary/10 text-primary"},ie=["onClick"],ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4"},ne=["onClick"],de={class:"text-sm cursor-pointer flex-1"},ce={class:"flex justify-end gap-2 mt-4"},me={__name:"Create",props:{permissions:{type:Object,default:()=>({})}},setup(S){const h=S,t=A({name:"",guard_name:"web",permissions:[]});R([]);const j=b(()=>[{title:"Dashboard",href:f("dashboard")},{title:"Roles",href:f("admin.roles.index")},{title:"Create Role",href:f("admin.roles.create")}]),c=b(()=>{const o={};return Object.keys(h.permissions).forEach(e=>{o[e]=h.permissions[e].map(r=>({id:r.id,name:r.name,module:r.module}))}),o}),w=o=>{const e=t.permissions.indexOf(o);e>-1?t.permissions.splice(e,1):t.permissions.push(o)},p=o=>t.permissions.includes(o),P=o=>{const e=c.value[o]||[];e.every(i=>p(i.id))?e.forEach(i=>{const n=t.permissions.indexOf(i.id);n>-1&&t.permissions.splice(n,1)}):e.forEach(i=>{p(i.id)||t.permissions.push(i.id)})},E=o=>{const e=c.value[o]||[];return e.length===0?!1:e.every(r=>p(r.id))},_=b(()=>Object.values(c.value).reduce((o,e)=>o+e.length,0)),y=b(()=>_.value===0?!1:t.permissions.length===_.value),I=()=>{if(y.value)t.permissions=[];else{const o=[];Object.values(c.value).forEach(e=>{e.forEach(r=>o.push(r.id))}),t.permissions=o}};function O(){t.post(f("admin.roles.store"),{preserveScroll:!0,onSuccess:()=>{t.reset()}})}return(o,e)=>(d(),m(v,null,[a(l(B),{title:"Create Role"}),a(z,{title:"Create Role",breadcrumbs:j.value},{default:g(()=>[s("div",H,[s("div",J,[s("form",{onSubmit:k(O,["prevent"]),class:"flex flex-col gap-6"},[s("div",K,[e[2]||(e[2]=s("label",{for:"name",class:"text-sm font-medium"},[M("Role Name "),s("span",{class:"text-red-500"},"*")],-1)),a(l(D),{id:"name",modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=r=>l(t).name=r),placeholder:"Enter role name (e.g., Admin, Manager)...",class:N({"p-invalid":l(t).errors.name}),"aria-describedby":"name-help"},null,8,["modelValue","class"]),a($,{message:l(t).errors.name},null,8,["message"])]),s("div",Q,[s("div",W,[e[4]||(e[4]=s("label",{class:"text-sm font-medium"},"Permissions",-1)),s("div",X,[s("label",Y,[a(l(x),{modelValue:y.value,binary:!0,"onUpdate:modelValue":I},null,8,["modelValue"]),e[3]||(e[3]=s("span",{class:"text-sm font-medium"}," Select All ",-1))]),s("small",Z,"Selected: "+u(l(t).permissions.length)+"/"+u(_.value),1)])]),Object.keys(c.value).length===0?(d(),m("div",ee," No permissions available ")):(d(),m("div",se,[(d(!0),m(v,null,C(c.value,(r,i)=>(d(),F(l(L),{key:i,value:[i],multiple:"",class:"rounded-xl border border-border bg-card shadow-sm overflow-hidden"},{default:g(()=>[a(l(T),{value:i},{default:g(()=>[a(l(q),{class:"bg-muted/40 hover:bg-muted/60 transition-colors"},{default:g(()=>[s("div",te,[s("div",le,[s("span",oe,u(i),1),s("span",re,u(r.filter(n=>p(n.id)).length)+"/"+u(r.length),1)]),s("div",{class:"flex items-center gap-2 cursor-pointer",onClick:k(n=>P(i),["stop"])},[a(l(x),{inputId:`select-all-${i}`,modelValue:E(i),binary:!0},null,8,["inputId","modelValue"]),e[5]||(e[5]=s("label",{class:"text-sm cursor-pointer"}," Select All ",-1))],8,ie)])]),_:2},1024),a(l(G),null,{default:g(()=>[s("div",ae,[(d(!0),m(v,null,C(r,n=>(d(),m("div",{key:n.id,class:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",onClick:ue=>w(n.id)},[a(l(x),{inputId:`permission-${n.id}`,modelValue:p(n.id),binary:!0},null,8,["inputId","modelValue"]),s("label",de,u(n.name),1)],8,ne))),128))])]),_:2},1024)]),_:2},1032,["value"])]),_:2},1032,["value"]))),128))])),a($,{message:l(t).errors.permissions},null,8,["message"])]),s("div",ce,[a(l(V),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:e[1]||(e[1]=r=>o.$inertia.visit(l(f)("admin.roles.index")))}),a(l(V),{type:"submit",label:"Create Role",loading:l(t).processing,disabled:l(t).processing},null,8,["loading","disabled"])])],32)])])]),_:1},8,["breadcrumbs"])],64))}},Ie=U(me,[["__scopeId","data-v-fea18517"]]);export{Ie as default};

import{u as N,c as A,r as D,m as L,w as C,a as m,o as u,b as o,d as t,h as M,e as T,f as l,g as z,i as v,n as b,j as y,k as O,F as S,l as R,p as G}from"./app-BK2Pf2Of.js";import{_ as c}from"./InputError.vue_vue_type_script_setup_true_lang-CcbTktWY.js";import{A as _,_ as H}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{s as V}from"./index-ByAzzK9e.js";import{s as f}from"./index-CbgF3ImK.js";import{s as J}from"./index-f_JnnQr1.js";import{s as K}from"./index-BR0xBKiT.js";import{s as g}from"./index-jPdbgPEm.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-BQA8nYZt.js";import"./index-vBjVw-4p.js";import"./index-DpBsBaFy.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";const P={class:"flex flex-col gap-6 p-6"},Q={class:"rounded-lg border border-border bg-card p-6"},W={class:"space-y-4"},X={class:"flex flex-col gap-2"},Y={class:"flex flex-col gap-2"},Z={class:"flex flex-col gap-2"},I={class:"space-y-4"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"flex flex-col gap-2"},te={class:"flex flex-col gap-2"},se={class:"flex flex-col gap-4"},ae={class:"flex items-center justify-between"},oe={class:"text-sm font-medium"},re={key:0,class:"text-red-500"},ie={key:0,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},de={key:1},ue={key:0,class:"space-y-3"},ne={class:"flex items-start justify-between gap-2"},me={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3"},pe={class:"flex flex-col gap-1"},ce={class:"flex flex-col gap-1"},fe={class:"flex flex-col gap-1"},be={class:"flex items-center gap-2"},ve={key:1,class:"text-sm text-gray-500 italic p-4 bg-gray-50 rounded-lg"},ge={class:"flex flex-col gap-2"},xe={class:"space-y-4"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"flex items-center justify-between p-4 border rounded-lg"},Ve={class:"flex items-center justify-between p-4 border rounded-lg"},we={class:"flex items-center justify-between p-4 border rounded-lg"},Ue={class:"flex items-center justify-between p-4 border rounded-lg"},ke={class:"flex justify-end gap-2"},Je={__name:"Edit",props:{attribute:{type:Object,required:!0}},setup(w){const r=w,s=N({name:r.attribute.name||"",slug:r.attribute.slug||"",description:r.attribute.description||"",type:r.attribute.type||"text",is_required:r.attribute.is_required||!1,is_filterable:r.attribute.is_filterable??!0,is_searchable:r.attribute.is_searchable??!0,is_active:r.attribute.is_active??!0,default_value:r.attribute.default_value||"",validation_rules:r.attribute.validation_rules||null,values:[],sort_order:r.attribute.sort_order||0}),x=A(()=>["select","multiselect"].includes(s.type)),$=[{label:"Text",value:"text"},{label:"Number",value:"number"},{label:"Select",value:"select"},{label:"Multiselect",value:"multiselect"},{label:"Boolean",value:"boolean"},{label:"Date",value:"date"},{label:"Textarea",value:"textarea"}],U=()=>{r.attribute.values&&Array.isArray(r.attribute.values)?(d.value=r.attribute.values.map(i=>({id:i.id,value:i.value||"",display_value:i.display_value||"",color_code:i.color_code||"",is_active:i.is_active??!0,sort_order:i.sort_order||0})),p()):(d.value=[],s.values=[])},d=D([]);L(()=>{U()}),C(()=>r.attribute.values,()=>{U()},{deep:!0}),C(()=>s.type,i=>{["select","multiselect"].includes(i)?U():(d.value=[],s.values=[])});const h=()=>{d.value.push({value:"",display_value:"",color_code:"",is_active:!0,sort_order:d.value.length}),p()},E=i=>{d.value.splice(i,1),p()},p=()=>{s.values=d.value.map((i,e)=>({...i,sort_order:e}))},j=()=>{s.name&&!s.slug&&(s.slug=s.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},q=A(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Attributes",href:_.index.url()},{title:`Edit: ${r.attribute.name}`,href:_.edit.url(r.attribute.id)}]);function B(){s.put(_.update.url(r.attribute.id),{preserveScroll:!0})}function F(){G.visit(_.index.url())}return(i,e)=>(u(),m(S,null,[o(t(M),{title:`Edit: ${w.attribute.name}`},null,8,["title"]),o(H,{title:`Edit: ${w.attribute.name}`,breadcrumbs:q.value},{default:T(()=>[l("div",P,[l("div",Q,[l("form",{onSubmit:z(B,["prevent"]),class:"flex flex-col gap-6"},[l("div",W,[e[15]||(e[15]=l("h3",{class:"text-lg font-semibold"},"Basic Information",-1)),l("div",X,[e[10]||(e[10]=l("label",{for:"name",class:"text-sm font-medium"},[v(" Attribute Name "),l("span",{class:"text-red-500"},"*")],-1)),o(t(f),{id:"name",modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).name=a),placeholder:"Enter attribute name...",class:b([{"p-invalid":t(s).errors.name},"w-full"]),"aria-describedby":"name-help",onBlur:j},null,8,["modelValue","class"]),o(c,{message:t(s).errors.name},null,8,["message"]),e[11]||(e[11]=l("small",{id:"name-help",class:"text-muted-foreground"}," Enter a unique attribute name ",-1))]),l("div",Y,[e[12]||(e[12]=l("label",{for:"slug",class:"text-sm font-medium"},"Slug",-1)),o(t(f),{id:"slug",modelValue:t(s).slug,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).slug=a),placeholder:"Auto-generated from name",class:b([{"p-invalid":t(s).errors.slug},"w-full"]),"aria-describedby":"slug-help"},null,8,["modelValue","class"]),o(c,{message:t(s).errors.slug},null,8,["message"]),e[13]||(e[13]=l("small",{id:"slug-help",class:"text-muted-foreground"}," URL-friendly identifier (auto-generated if left empty) ",-1))]),l("div",Z,[e[14]||(e[14]=l("label",{for:"description",class:"text-sm font-medium"},"Description",-1)),o(t(J),{id:"description",modelValue:t(s).description,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).description=a),placeholder:"Enter attribute description...",class:b([{"p-invalid":t(s).errors.description},"w-full"]),rows:"3"},null,8,["modelValue","class"]),o(c,{message:t(s).errors.description},null,8,["message"])])]),l("div",I,[e[26]||(e[26]=l("h3",{class:"text-lg font-semibold"},"Configuration",-1)),l("div",ee,[l("div",le,[e[16]||(e[16]=l("label",{for:"type",class:"text-sm font-medium"},[v(" Type "),l("span",{class:"text-red-500"},"*")],-1)),o(t(K),{id:"type",modelValue:t(s).type,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).type=a),options:$,optionLabel:"label",optionValue:"value",placeholder:"Select Type",class:b([{"p-invalid":t(s).errors.type},"w-full"])},null,8,["modelValue","class"]),o(c,{message:t(s).errors.type},null,8,["message"])]),l("div",te,[e[17]||(e[17]=l("label",{for:"sort_order",class:"text-sm font-medium"},"Sort Order",-1)),o(t(f),{id:"sort_order",modelValue:t(s).sort_order,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).sort_order=a),modelModifiers:{number:!0},type:"number",placeholder:"0",class:b([{"p-invalid":t(s).errors.sort_order},"w-full"])},null,8,["modelValue","class"]),o(c,{message:t(s).errors.sort_order},null,8,["message"])])]),l("div",se,[l("div",ae,[l("label",oe,[e[18]||(e[18]=v(" Attribute Values ",-1)),x.value?(u(),m("span",re,"*")):y("",!0)]),x.value?(u(),O(t(V),{key:0,label:"Add Value",icon:"pi pi-plus",size:"small",onClick:h,type:"button"})):y("",!0)]),x.value?y("",!0):(u(),m("div",ie,[...e[19]||(e[19]=[l("p",{class:"text-sm text-blue-800"},[l("i",{class:"pi pi-info-circle mr-2"}),v(' Select "Select" or "Multiselect" as the attribute type to add values. ')],-1)])])),x.value?(u(),m("div",de,[d.value.length>0?(u(),m("div",ue,[(u(!0),m(S,null,R(d.value,(a,k)=>(u(),m("div",{key:a.id||k,class:"p-4 border rounded-lg space-y-3"},[l("div",ne,[l("div",me,[l("div",pe,[e[20]||(e[20]=l("label",{class:"text-xs font-medium text-gray-600"},[v("Value "),l("span",{class:"text-red-500"},"*")],-1)),o(t(f),{modelValue:a.value,"onUpdate:modelValue":n=>a.value=n,placeholder:"e.g., Red, Small, etc.",class:"w-full",onInput:p},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ce,[e[21]||(e[21]=l("label",{class:"text-xs font-medium text-gray-600"},"Display Value",-1)),o(t(f),{modelValue:a.display_value,"onUpdate:modelValue":n=>a.display_value=n,placeholder:"Optional display text",class:"w-full",onInput:p},null,8,["modelValue","onUpdate:modelValue"])]),l("div",fe,[e[22]||(e[22]=l("label",{class:"text-xs font-medium text-gray-600"},"Color Code",-1)),o(t(f),{modelValue:a.color_code,"onUpdate:modelValue":n=>a.color_code=n,placeholder:"#FF0000",class:"w-full",maxlength:"7",onInput:p},null,8,["modelValue","onUpdate:modelValue"])]),l("div",be,[o(t(g),{modelValue:a.is_active,"onUpdate:modelValue":[n=>a.is_active=n,p]},null,8,["modelValue","onUpdate:modelValue"]),e[23]||(e[23]=l("label",{class:"text-xs text-gray-600"},"Active",-1))])]),o(t(V),{icon:"pi pi-trash",severity:"danger",text:"",rounded:"",onClick:n=>E(k),type:"button"},null,8,["onClick"])])]))),128))])):(u(),m("div",ve,' No values added. Click "Add Value" button above to create attribute values. ')),o(c,{message:t(s).errors.values},null,8,["message"]),e[24]||(e[24]=l("small",{class:"text-muted-foreground"}," Add values for select/multiselect type attributes. Each value can have a display name and color code. ",-1))])):y("",!0)]),l("div",ge,[e[25]||(e[25]=l("label",{for:"default_value",class:"text-sm font-medium"},"Default Value",-1)),o(t(f),{id:"default_value",modelValue:t(s).default_value,"onUpdate:modelValue":e[5]||(e[5]=a=>t(s).default_value=a),placeholder:"Enter default value (optional)",class:b([{"p-invalid":t(s).errors.default_value},"w-full"])},null,8,["modelValue","class"]),o(c,{message:t(s).errors.default_value},null,8,["message"])])]),l("div",xe,[e[31]||(e[31]=l("h3",{class:"text-lg font-semibold"},"Settings",-1)),l("div",ye,[l("div",_e,[e[27]||(e[27]=l("div",null,[l("label",{class:"text-sm font-medium"},"Required"),l("p",{class:"text-xs text-muted-foreground"},"Attribute is required")],-1)),o(t(g),{modelValue:t(s).is_required,"onUpdate:modelValue":e[6]||(e[6]=a=>t(s).is_required=a)},null,8,["modelValue"])]),l("div",Ve,[e[28]||(e[28]=l("div",null,[l("label",{class:"text-sm font-medium"},"Filterable"),l("p",{class:"text-xs text-muted-foreground"},"Can be used in filters")],-1)),o(t(g),{modelValue:t(s).is_filterable,"onUpdate:modelValue":e[7]||(e[7]=a=>t(s).is_filterable=a)},null,8,["modelValue"])]),l("div",we,[e[29]||(e[29]=l("div",null,[l("label",{class:"text-sm font-medium"},"Searchable"),l("p",{class:"text-xs text-muted-foreground"},"Can be searched")],-1)),o(t(g),{modelValue:t(s).is_searchable,"onUpdate:modelValue":e[8]||(e[8]=a=>t(s).is_searchable=a)},null,8,["modelValue"])]),l("div",Ue,[e[30]||(e[30]=l("div",null,[l("label",{class:"text-sm font-medium"},"Active"),l("p",{class:"text-xs text-muted-foreground"},"Attribute is active")],-1)),o(t(g),{modelValue:t(s).is_active,"onUpdate:modelValue":e[9]||(e[9]=a=>t(s).is_active=a)},null,8,["modelValue"])])])]),l("div",ke,[o(t(V),{label:"Cancel",severity:"secondary",outlined:"",onClick:F,type:"button"}),o(t(V),{label:"Update Attribute",type:"submit",loading:t(s).processing},null,8,["loading"])])],32)])])]),_:1},8,["title","breadcrumbs"])],64))}};export{Je as default};

import{r as n,c as y,q as ve,a as f,o as d,b as a,d as i,h as pe,e as u,f as s,s as fe,k as L,j as b,t as c,v as N,i as me,F as ge,p as m}from"./app-g_uq3P9Q.js";import{F as p,_ as he}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjP68X9r.js";import{s as xe,a as g}from"./index-CSEaDcPC.js";import{s as C}from"./index-B_MRzLld.js";import{s as ye}from"./index-DW7toPKJ.js";import{s as I}from"./index-BRBbQ8EH.js";import{s as be}from"./index-2ss-twuS.js";import{s as j}from"./index-CP_oih1b.js";import{s as M}from"./index-DI7avG2Q.js";import{_ as K}from"./DeleteConfirmationModal-DHEZnWn4.js";import"./index-dWEWYs2j.js";import"./useForwardExpose-CxWsbAvG.js";import"./VisuallyHidden-BIE4ZmuB.js";import"./RovingFocusGroup-DoPalDKS.js";import"./createLucideIcon-Cn-To4t-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-CFvIkJt3.js";import"./index-Diih4kcu.js";import"./index-CPL-5HGm.js";import"./index-DqafScSn.js";import"./index-C3A8jhMi.js";import"./index-Cnk_WgH2.js";import"./index-KNfTspns.js";import"./index-AOL12p5l.js";import"./index-DA5wfV1C.js";import"./index-CZBIT8sJ.js";const _e={class:"flex flex-col gap-6 p-6"},we={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},Fe={class:"w-full sm:w-auto search-input-wrapper"},Se={class:"flex gap-2"},ke={class:"relative inline-block"},Ve={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},De={class:"relative inline-block"},Ae={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ce={class:"data-table-container"},$e={class:"overflow-x-auto"},Ue={key:0,class:"text-center py-12"},Le={class:"flex items-center h-full"},Ne={class:"text-sm text-gray-600"},je={class:"flex flex-col"},Be={class:"flex items-center gap-2"},Oe={class:"font-medium text-gray-900"},Ee={key:0,class:"text-xs text-gray-500 truncate max-w-xs"},Pe={class:"font-medium"},Re={class:"flex flex-col text-xs"},Te={class:"text-gray-600"},Ie={class:"text-gray-600"},Me={class:"text-sm text-gray-600"},Ke={class:"flex items-center gap-3"},qe=["onClick"],ze=["onClick"],Ge=["onClick"],He={class:"flex flex-col gap-6"},Je={class:"flex flex-col gap-2"},Qe={class:"flex flex-col gap-2"},We={class:"flex flex-col gap-2"},Xe={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Ye={class:"flex gap-2 justify-end"},Vt={__name:"Index",props:{flashSales:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,is_featured:null,status:null,search:null})}},setup(q){const o=q,_=n(o.filters?.search||""),v=n([]),B=n(0),U=n(10),w=n(!1),r=n({isActive:o.filters?.is_active?Array.isArray(o.filters.is_active)?o.filters.is_active:[o.filters.is_active]:[],isFeatured:o.filters?.is_featured?Array.isArray(o.filters.is_featured)?o.filters.is_featured:[o.filters.is_featured]:[],status:o.filters?.status?Array.isArray(o.filters.status)?o.filters.status:[o.filters.status]:[]}),z=[{label:"Active",value:!0},{label:"Inactive",value:!1}],G=[{label:"Featured",value:!0},{label:"Not Featured",value:!1}],H=[{label:"Ongoing",value:"ongoing"},{label:"Upcoming",value:"upcoming"},{label:"Expired",value:"expired"}],F=n(!1),h=n(!1),S=n(null),k=n(""),V=n(!1),x=n(!1),O=y(()=>o.flashSales),J=y(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Flash Sales",href:p.index.url()}]),Q=l=>B.value*U.value+l+1,W=l=>{B.value=l.page,U.value=l.rows},X=l=>{m.visit(p.show.url(l))},Y=l=>{m.visit(p.edit.url(l))},Z=(l,e)=>{S.value=l,k.value=e,F.value=!0,h.value=!1},ee=()=>{S.value&&(h.value=!0,m.delete(p.destroy.url(S.value),{preserveScroll:!0,onSuccess:()=>{h.value=!1,F.value=!1,S.value=null,k.value=""},onError:()=>{h.value=!1},onFinish:()=>{h.value=!1}}))},te=()=>{F.value=!1,S.value=null,k.value="",h.value=!1},le=y(()=>k.value?`Are you sure you want to delete "${k.value}"?`:"Are you sure you want to delete this flash sale?"),se=()=>{m.visit(p.create.url())},ae=l=>{m.post(p.toggleStatus.url(l),{},{preserveScroll:!0})},ie=l=>{m.post(p.toggleFeatured.url(l),{},{preserveScroll:!0})},D=y(()=>{let l=0;return r.value.isActive&&r.value.isActive.length>0&&l++,r.value.isFeatured&&r.value.isFeatured.length>0&&l++,r.value.status&&r.value.status.length>0&&l++,l}),E=(l=!0)=>{const e={};r.value.isActive&&r.value.isActive.length>0&&(e.is_active=r.value.isActive),r.value.isFeatured&&r.value.isFeatured.length>0&&(e.is_featured=r.value.isFeatured),r.value.status&&r.value.status.length>0&&(e.status=r.value.status),_.value&&(e.search=_.value),m.get(p.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{l&&(w.value=!1)}})},re=()=>{r.value={isActive:[],isFeatured:[],status:[]},_.value="",m.get(p.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1}})},oe=()=>{v.value.length!==0&&(V.value=!0,x.value=!1)},ue=()=>{if(v.value.length===0)return;x.value=!0;const l=v.value.map(e=>e.id);m.post(p.bulkDelete.url(),{ids:l},{preserveScroll:!0,onSuccess:()=>{x.value=!1,V.value=!1,v.value=[]},onError:()=>{x.value=!1},onFinish:()=>{x.value=!1}})},ne=()=>{V.value=!1,x.value=!1},de=y(()=>{const l=v.value.length;return l===0?"":`Are you sure you want to delete ${l} ${l===1?"flash sale":"flash sales"}?`}),P=y(()=>v.value&&v.value.length>0),R=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ce=l=>l.discount_value?l.discount_type==="percentage"?`${l.discount_value}%`:`$${parseFloat(l.discount_value).toFixed(2)}`:"N/A",T=l=>{const e=new Date,A=new Date(l.start_date),t=new Date(l.end_date);return e<A?{label:"Upcoming",severity:"info"}:e>t?{label:"Expired",severity:"danger"}:l.is_active?{label:"Ongoing",severity:"success"}:{label:"Inactive",severity:"secondary"}};return(l,e)=>{const A=ve("tooltip");return d(),f(ge,null,[a(i(pe),{title:"Flash Sales"}),a(he,{title:"Flash Sales",breadcrumbs:J.value},{default:u(()=>[s("div",_e,[s("div",we,[s("div",Fe,[e[9]||(e[9]=s("i",{class:"pi pi-search search-icon"},null,-1)),a(i(ye),{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"Search",class:"w-full",onKeyup:fe(E,["enter"])},null,8,["modelValue"])]),s("div",Se,[s("div",ke,[P.value?(d(),L(i(C),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:oe})):b("",!0),P.value?(d(),f("span",Ve,c(v.value.length),1)):b("",!0)]),s("div",De,[a(i(C),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>w.value=!0)}),D.value>0?(d(),f("span",Ae,c(D.value),1)):b("",!0)]),a(i(C),{label:"Add Flash Sale",icon:"pi pi-plus",severity:"primary",onClick:se,class:"flex-shrink-0"})])]),s("div",Ce,[s("div",$e,[O.value.length===0?(d(),f("div",Ue,[...e[10]||(e[10]=[s("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),s("p",{class:"text-gray-500"},"No flash sales found",-1)])])):(d(),L(i(xe),{key:1,value:O.value,paginator:!0,rows:U.value,rowsPerPageOptions:[5,10,20,50],selection:v.value,"onUpdate:selection":e[2]||(e[2]=t=>v.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","slug","description"],onPage:W},{default:u(()=>[a(i(g),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(g),{header:"#",style:{width:"60px"}},{body:u(t=>[s("div",Le,[s("span",Ne,c(Q(t.index)),1)])]),_:1}),a(i(g),{field:"name",header:"Flash Sale Name",sortable:!0},{body:u(t=>[s("div",je,[s("div",Be,[s("span",Oe,c(t.data.name),1),t.data.is_featured?(d(),L(i(M),{key:0,value:"Featured",severity:"warning",class:"text-xs"})):b("",!0)]),t.data.description?(d(),f("span",Ee,c(t.data.description),1)):b("",!0)])]),_:1}),a(i(g),{header:"Discount",style:{width:"120px"}},{body:u(t=>[s("span",Pe,c(ce(t.data)),1)]),_:1}),a(i(g),{header:"Validity",style:{width:"250px"}},{body:u(t=>[s("div",Re,[s("span",Te,c(R(t.data.start_date)),1),s("span",Ie," to "+c(R(t.data.end_date)),1),a(i(M),{value:T(t.data).label,severity:T(t.data).severity,class:"text-xs mt-1"},null,8,["value","severity"])])]),_:1}),a(i(g),{header:"Products",style:{width:"100px"}},{body:u(t=>[s("span",Me,c(t.data.products?.length||0),1)]),_:1}),a(i(g),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:u(t=>[a(i(I),{modelValue:t.data.is_active,"onUpdate:modelValue":$=>ae(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(g),{field:"is_featured",header:"Featured",sortable:!0,sortField:"is_featured",style:{width:"120px"}},{body:u(t=>[a(i(I),{modelValue:t.data.is_featured,"onUpdate:modelValue":$=>ie(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(g),{header:"Actions",style:{width:"100px"}},{body:u(t=>[s("div",Ke,[N((d(),f("button",{onClick:$=>X(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[11]||(e[11]=[s("i",{class:"pi pi-eye text-sm"},null,-1)])],8,qe)),[[A,"View",void 0,{top:!0}]]),N((d(),f("button",{onClick:$=>Y(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[12]||(e[12]=[s("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,ze)),[[A,"Edit",void 0,{top:!0}]]),N((d(),f("button",{onClick:$=>Z(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[13]||(e[13]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Ge)),[[A,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(K,{visible:F.value,"onUpdate:visible":e[3]||(e[3]=t=>F.value=t),title:"Delete Flash Sale",message:le.value,loading:h.value,onConfirm:ee,onCancel:te},null,8,["visible","message","loading"]),a(K,{visible:V.value,"onUpdate:visible":e[4]||(e[4]=t=>V.value=t),title:"Delete Flash Sales",message:de.value,loading:x.value,onConfirm:ue,onCancel:ne},null,8,["visible","message","loading"]),a(i(be),{visible:w.value,"onUpdate:visible":e[8]||(e[8]=t=>w.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:u(()=>[...e[14]||(e[14]=[s("div",{class:"flex items-center justify-between w-full pr-8"},[s("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:u(()=>[s("div",Ye,[a(i(C),{label:"Reset",severity:"secondary",outlined:"",onClick:re}),a(i(C),{label:"Apply Filters",severity:"primary",onClick:E})])]),default:u(()=>[s("div",He,[s("div",Je,[e[15]||(e[15]=s("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),a(i(j),{modelValue:r.value.isActive,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.isActive=t),options:z,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),s("div",Qe,[e[16]||(e[16]=s("label",{class:"text-sm font-medium text-gray-700"},"Featured",-1)),a(i(j),{modelValue:r.value.isFeatured,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.isFeatured=t),options:G,optionLabel:"label",optionValue:"value",placeholder:"Select Featured",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),s("div",We,[e[17]||(e[17]=s("label",{class:"text-sm font-medium text-gray-700"},"Sale Status",-1)),a(i(j),{modelValue:r.value.status,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.status=t),options:H,optionLabel:"label",optionValue:"value",placeholder:"Select Sale Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),D.value>0?(d(),f("div",Xe,[e[18]||(e[18]=s("i",{class:"pi pi-info-circle mr-2"},null,-1)),me(" "+c(D.value)+" "+c(D.value===1?"filter":"filters")+" active ",1)])):b("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{Vt as default};

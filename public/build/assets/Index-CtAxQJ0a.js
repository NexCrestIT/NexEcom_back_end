import{r as u,c as h,q as de,a as v,o as n,b as o,d as r,h as ce,e as d,f as a,s as ve,k as E,j as x,t as f,v as P,i as fe,F as pe,p as m}from"./app-CSoXAXzJ.js";import{e as p,_ as me}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CY8uq29N.js";import{s as ge,a as g}from"./index-C1o9GEFB.js";import{s as C}from"./index-rgAG_kXB.js";import{s as ye}from"./index-ClsTdmJU.js";import{s as T}from"./index-uJ02oHJV.js";import{s as _e}from"./index-BfQzZyYO.js";import{s as L}from"./index-DPO3fZFO.js";import{s as be}from"./index-DUysgjrk.js";import{_ as q}from"./DeleteConfirmationModal-DQqrJoKX.js";import"./index-L5D_ktCJ.js";import"./useForwardExpose-DJAZBMAY.js";import"./VisuallyHidden-D64JTJ7n.js";import"./RovingFocusGroup-Cj9w1ZFH.js";import"./createLucideIcon-D0VFtXE2.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-BhB5gOq0.js";import"./index-DBsg8l4Z.js";import"./index-MKqwDtgB.js";import"./index-WnAgxEih.js";import"./index-CbxO-fR3.js";import"./index-yX7v5s_a.js";import"./index-BG-nKjgy.js";import"./index-05MKcTrA.js";import"./index-4rJ_OANk.js";import"./index-DvP-GMik.js";const he={class:"flex flex-col gap-6 p-6"},xe={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},ke={class:"w-full sm:w-auto search-input-wrapper"},we={class:"flex gap-2"},Se={class:"relative inline-block"},Fe={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ae={class:"relative inline-block"},Ve={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ie={class:"data-table-container"},Ce={class:"overflow-x-auto"},De={key:0,class:"text-center py-12"},$e={class:"flex items-center h-full"},Pe={class:"text-sm text-gray-600"},Le={class:"flex items-center h-full gap-3"},Ue=["src","alt"],Ne={class:"flex flex-col"},je={class:"font-medium text-gray-900"},Be={class:"text-xs text-gray-500"},Oe={class:"flex flex-col"},Re={class:"font-medium"},Ee={key:0,class:"text-xs text-gray-400 line-through"},Te={class:"text-xs text-gray-500 block mt-1"},qe={class:"flex items-center gap-3"},Me=["onClick"],Ke=["onClick"],Qe=["onClick"],ze={class:"flex flex-col gap-6"},Ge={class:"flex flex-col gap-2"},He={class:"flex flex-col gap-2"},Je={class:"flex flex-col gap-2"},We={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Xe={class:"flex gap-2 justify-end"},Ft={__name:"Index",props:{products:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,is_featured:null,category_id:null,brand_id:null,collection_id:null,stock_status:null,search:null})}},setup(M){const i=M,k=u(i.filters?.search||""),c=u([]),U=u(0),D=u(10),w=u(!1),s=u({isActive:i.filters?.is_active?Array.isArray(i.filters.is_active)?i.filters.is_active:[i.filters.is_active]:[],isFeatured:i.filters?.is_featured?Array.isArray(i.filters.is_featured)?i.filters.is_featured:[i.filters.is_featured]:[],categoryId:i.filters?.category_id?Array.isArray(i.filters.category_id)?i.filters.category_id:[i.filters.category_id]:[],brandId:i.filters?.brand_id?Array.isArray(i.filters.brand_id)?i.filters.brand_id:[i.filters.brand_id]:[],collectionId:i.filters?.collection_id?Array.isArray(i.filters.collection_id)?i.filters.collection_id:[i.filters.collection_id]:[],stockStatus:i.filters?.stock_status?Array.isArray(i.filters.stock_status)?i.filters.stock_status:[i.filters.stock_status]:[]}),K=[{label:"Active",value:!0},{label:"Inactive",value:!1}],Q=[{label:"Featured",value:!0},{label:"Not Featured",value:!1}],z=[{label:"In Stock",value:"in_stock"},{label:"Out of Stock",value:"out_of_stock"},{label:"Low Stock",value:"low_stock"}],S=u(!1),y=u(!1),F=u(null),A=u(""),V=u(!1),_=u(!1),N=h(()=>i.products),G=h(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Products",href:p.index.url()}]),H=l=>U.value*D.value+l+1,J=l=>{U.value=l.page,D.value=l.rows},W=l=>{m.visit(p.show.url(l))},X=l=>{m.visit(p.edit.url(l))},Y=(l,e)=>{F.value=l,A.value=e,S.value=!0,y.value=!1},Z=()=>{F.value&&(y.value=!0,m.delete(p.destroy.url(F.value),{preserveScroll:!0,onSuccess:()=>{y.value=!1,S.value=!1,F.value=null,A.value=""},onError:()=>{y.value=!1},onFinish:()=>{y.value=!1}}))},ee=()=>{S.value=!1,F.value=null,A.value="",y.value=!1},te=h(()=>A.value?`Are you sure you want to delete "${A.value}"?`:"Are you sure you want to delete this product?"),le=()=>{m.visit(p.create.url())},se=l=>{m.post(p.toggleStatus.url(l),{},{preserveScroll:!0})},ae=l=>{m.post(p.toggleFeatured.url(l),{},{preserveScroll:!0})},I=h(()=>{let l=0;return s.value.isActive&&s.value.isActive.length>0&&l++,s.value.isFeatured&&s.value.isFeatured.length>0&&l++,s.value.categoryId&&s.value.categoryId.length>0&&l++,s.value.brandId&&s.value.brandId.length>0&&l++,s.value.collectionId&&s.value.collectionId.length>0&&l++,s.value.stockStatus&&s.value.stockStatus.length>0&&l++,l}),j=(l=!0)=>{const e={};s.value.isActive&&s.value.isActive.length>0&&(e.is_active=s.value.isActive),s.value.isFeatured&&s.value.isFeatured.length>0&&(e.is_featured=s.value.isFeatured),s.value.categoryId&&s.value.categoryId.length>0&&(e.category_id=s.value.categoryId),s.value.brandId&&s.value.brandId.length>0&&(e.brand_id=s.value.brandId),s.value.collectionId&&s.value.collectionId.length>0&&(e.collection_id=s.value.collectionId),s.value.stockStatus&&s.value.stockStatus.length>0&&(e.stock_status=s.value.stockStatus),k.value&&(e.search=k.value),m.get(p.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{l&&(w.value=!1)}})},ie=()=>{s.value={isActive:[],isFeatured:[],categoryId:[],brandId:[],collectionId:[],stockStatus:[]},k.value="",m.get(p.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1}})},oe=()=>{c.value.length!==0&&(V.value=!0,_.value=!1)},re=()=>{if(c.value.length===0)return;_.value=!0;const l=c.value.map(e=>e.id);m.post(p.bulkDelete.url(),{ids:l},{preserveScroll:!0,onSuccess:()=>{_.value=!1,V.value=!1,c.value=[]},onError:()=>{_.value=!1},onFinish:()=>{_.value=!1}})},ue=()=>{V.value=!1,_.value=!1},ne=h(()=>{const l=c.value.length;return l===0?"":`Are you sure you want to delete ${l} ${l===1?"product":"products"}?`}),B=h(()=>c.value&&c.value.length>0),O=l=>`$${parseFloat(l).toFixed(2)}`,R=l=>l.track_inventory?l.stock_quantity<=0&&!l.allow_backorder?{label:"Out of Stock",severity:"danger"}:l.low_stock_threshold&&l.stock_quantity<=l.low_stock_threshold?{label:"Low Stock",severity:"warning"}:{label:"In Stock",severity:"success"}:{label:"N/A",severity:"secondary"};return(l,e)=>{const $=de("tooltip");return n(),v(pe,null,[o(r(ce),{title:"Products"}),o(me,{title:"Products",breadcrumbs:G.value},{default:d(()=>[a("div",he,[a("div",xe,[a("div",ke,[e[10]||(e[10]=a("i",{class:"pi pi-search search-icon"},null,-1)),o(r(ye),{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t),placeholder:"Search",class:"w-full",onKeyup:ve(j,["enter"])},null,8,["modelValue"])]),a("div",we,[a("div",Se,[B.value?(n(),E(r(C),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:oe})):x("",!0),B.value?(n(),v("span",Fe,f(c.value.length),1)):x("",!0)]),a("div",Ae,[o(r(C),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>w.value=!0)}),I.value>0?(n(),v("span",Ve,f(I.value),1)):x("",!0)]),o(r(C),{label:"Add Product",icon:"pi pi-plus",severity:"primary",onClick:le,class:"flex-shrink-0"})])]),a("div",Ie,[a("div",Ce,[N.value.length===0?(n(),v("div",De,[...e[11]||(e[11]=[a("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),a("p",{class:"text-gray-500"},"No products found",-1)])])):(n(),E(r(ge),{key:1,value:N.value,paginator:!0,rows:D.value,rowsPerPageOptions:[5,10,20,50],selection:c.value,"onUpdate:selection":e[3]||(e[3]=t=>c.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","sku","description"],onPage:J},{default:d(()=>[o(r(g),{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(r(g),{header:"#",style:{width:"60px"}},{body:d(t=>[a("div",$e,[a("span",Pe,f(H(t.index)),1)])]),_:1}),o(r(g),{field:"name",header:"Product Name",sortable:!0},{body:d(t=>[a("div",Le,[t.data.main_image_url?(n(),v("img",{key:0,src:t.data.main_image_url,alt:t.data.name,class:"w-12 h-12 object-cover rounded",onError:e[2]||(e[2]=b=>b.target.style.display="none")},null,40,Ue)):x("",!0),a("div",Ne,[a("span",je,f(t.data.name),1),a("span",Be,"SKU: "+f(t.data.sku),1)])])]),_:1}),o(r(g),{field:"price",header:"Price",sortable:!0,style:{width:"100px"}},{body:d(t=>[a("div",Oe,[a("span",Re,f(O(t.data.price)),1),t.data.compare_at_price?(n(),v("span",Ee,f(O(t.data.compare_at_price)),1)):x("",!0)])]),_:1}),o(r(g),{field:"stock_quantity",header:"Stock",sortable:!0,style:{width:"100px"}},{body:d(t=>[o(r(be),{value:R(t.data).label,severity:R(t.data).severity},null,8,["value","severity"]),a("span",Te," Qty: "+f(t.data.stock_quantity),1)]),_:1}),o(r(g),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:d(t=>[o(r(T),{modelValue:t.data.is_active,"onUpdate:modelValue":b=>se(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(r(g),{field:"is_featured",header:"Featured",sortable:!0,sortField:"is_featured",style:{width:"120px"}},{body:d(t=>[o(r(T),{modelValue:t.data.is_featured,"onUpdate:modelValue":b=>ae(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(r(g),{header:"Actions",style:{width:"100px"}},{body:d(t=>[a("div",qe,[P((n(),v("button",{onClick:b=>W(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[12]||(e[12]=[a("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Me)),[[$,"View",void 0,{top:!0}]]),P((n(),v("button",{onClick:b=>X(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[13]||(e[13]=[a("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Ke)),[[$,"Edit",void 0,{top:!0}]]),P((n(),v("button",{onClick:b=>Y(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[14]||(e[14]=[a("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Qe)),[[$,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),o(q,{visible:S.value,"onUpdate:visible":e[4]||(e[4]=t=>S.value=t),title:"Delete Product",message:te.value,loading:y.value,onConfirm:Z,onCancel:ee},null,8,["visible","message","loading"]),o(q,{visible:V.value,"onUpdate:visible":e[5]||(e[5]=t=>V.value=t),title:"Delete Products",message:ne.value,loading:_.value,onConfirm:re,onCancel:ue},null,8,["visible","message","loading"]),o(r(_e),{visible:w.value,"onUpdate:visible":e[9]||(e[9]=t=>w.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:d(()=>[...e[15]||(e[15]=[a("div",{class:"flex items-center justify-between w-full pr-8"},[a("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:d(()=>[a("div",Xe,[o(r(C),{label:"Reset",severity:"secondary",outlined:"",onClick:ie}),o(r(C),{label:"Apply Filters",severity:"primary",onClick:j})])]),default:d(()=>[a("div",ze,[a("div",Ge,[e[16]||(e[16]=a("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),o(r(L),{modelValue:s.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.isActive=t),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),a("div",He,[e[17]||(e[17]=a("label",{class:"text-sm font-medium text-gray-700"},"Featured",-1)),o(r(L),{modelValue:s.value.isFeatured,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.isFeatured=t),options:Q,optionLabel:"label",optionValue:"value",placeholder:"Select Featured",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),a("div",Je,[e[18]||(e[18]=a("label",{class:"text-sm font-medium text-gray-700"},"Stock Status",-1)),o(r(L),{modelValue:s.value.stockStatus,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.stockStatus=t),options:z,optionLabel:"label",optionValue:"value",placeholder:"Select Stock Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),I.value>0?(n(),v("div",We,[e[19]||(e[19]=a("i",{class:"pi pi-info-circle mr-2"},null,-1)),fe(" "+f(I.value)+" "+f(I.value===1?"filter":"filters")+" active ",1)])):x("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{Ft as default};

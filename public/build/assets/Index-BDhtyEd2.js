import{r as d,c as h,q as ue,a as f,o as c,b as a,d as i,h as de,e as u,f as t,s as ce,k as N,j as _,t as n,v as F,i as ve,F as pe,p as m}from"./app-CsZvk_OI.js";import{P as p,_ as fe}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CfI51x6S.js";import{s as me,a as y}from"./index-CnIfW9D3.js";import{s as P}from"./index-BYFlyxjJ.js";import{s as ye}from"./index-1iZKgu-n.js";import{s as be}from"./index-pi8ETc4C.js";import{s as ge}from"./index-GZrV6j6J.js";import{s as T}from"./index-DiTkXXI1.js";import{s as O}from"./index-CYCyTtvj.js";import{_ as E}from"./DeleteConfirmationModal-tofwjkE9.js";import"./index-BqkInGoY.js";import"./useForwardExpose-CrRxdZzL.js";import"./VisuallyHidden-DGCGjvMv.js";import"./RovingFocusGroup-CF8qITZY.js";import"./createLucideIcon-3cHpo18T.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DLpk5Ssm.js";import"./index-B7hmJaUz.js";import"./index-Bzv5bibZ.js";import"./index-D_ZR9ELe.js";import"./index-DbgxBhcK.js";import"./index-BGq02r0v.js";import"./index-no0rzq44.js";import"./index-CCICK8-f.js";import"./index-Cy9aq3qC.js";import"./index-Bfmys3hZ.js";const xe={class:"flex flex-col gap-6 p-6"},he={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},_e={class:"w-full sm:w-auto search-input-wrapper"},we={class:"flex gap-2"},ke={class:"relative inline-block"},De={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ce={class:"relative inline-block"},Se={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ae={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Le={class:"rounded-lg border border-border bg-card p-4"},Ve={class:"text-2xl font-bold"},Pe={class:"rounded-lg border border-border bg-card p-4"},$e={class:"text-2xl font-bold text-green-600"},Fe={class:"rounded-lg border border-border bg-card p-4"},Ue={class:"text-2xl font-bold text-blue-600"},Ne={class:"rounded-lg border border-border bg-card p-4"},Te={class:"text-2xl font-bold text-purple-600"},Re={class:"data-table-container"},je={class:"overflow-x-auto"},Be={key:0,class:"text-center py-12"},Me={class:"flex items-center h-full"},Oe={class:"text-sm text-gray-600"},Ee={class:"flex flex-col"},Ie={class:"font-medium text-gray-900"},Ke={class:"text-xs text-gray-500"},We={class:"text-sm"},qe={class:"text-sm"},ze={class:"flex items-center gap-2"},Ge={class:"text-sm"},He={class:"flex items-center gap-3"},Je=["onClick"],Qe=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={class:"flex flex-col gap-6"},et={class:"flex flex-col gap-2"},tt={class:"flex flex-col gap-2"},lt={class:"flex flex-col gap-2"},st={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},at={class:"flex gap-2 justify-end"},Ft={__name:"Index",props:{priceLists:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,type:null,is_default:null,search:null})}},setup(w){const r=w,k=d(r.filters?.search||""),v=d([]),R=d(0),U=d(10),D=d(!1),o=d({isActive:r.filters?.is_active?Array.isArray(r.filters.is_active)?r.filters.is_active:[r.filters.is_active]:[],type:r.filters?.type?Array.isArray(r.filters.type)?r.filters.type:[r.filters.type]:[],isDefault:r.filters?.is_default?Array.isArray(r.filters.is_default)?r.filters.is_default:[r.filters.is_default]:[]}),I=[{label:"Active",value:!0},{label:"Inactive",value:!1}],K=[{label:"Wholesale",value:"wholesale"},{label:"Retail",value:"retail"},{label:"Custom",value:"custom"},{label:"Promotional",value:"promotional"}],W=[{label:"Default",value:!0},{label:"Not Default",value:!1}],C=d(!1),b=d(!1),S=d(null),A=d(""),L=d(!1),g=d(!1),j=h(()=>r.priceLists),q=h(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Price Lists",href:p.index.url()}]),z=s=>R.value*U.value+s+1,G=s=>{R.value=s.page,U.value=s.rows},H=s=>{m.visit(p.show.url(s))},J=s=>{m.visit(p.edit.url(s))},Q=(s,e)=>{S.value=s,A.value=e,C.value=!0,b.value=!1},X=()=>{S.value&&(b.value=!0,m.delete(p.destroy.url(S.value),{preserveScroll:!0,onSuccess:()=>{b.value=!1,C.value=!1,S.value=null,A.value=""},onError:()=>{b.value=!1},onFinish:()=>{b.value=!1}}))},Y=()=>{C.value=!1,S.value=null,A.value="",b.value=!1},Z=h(()=>A.value?`Are you sure you want to delete "${A.value}"?`:"Are you sure you want to delete this price list?"),ee=()=>{m.visit(p.create.url())},te=s=>{m.post(p.toggleStatus.url(s),{},{preserveScroll:!0})},le=s=>{m.post(p.setAsDefault.url(s),{},{preserveScroll:!0})},V=h(()=>{let s=0;return o.value.isActive&&o.value.isActive.length>0&&s++,o.value.type&&o.value.type.length>0&&s++,o.value.isDefault&&o.value.isDefault.length>0&&s++,s}),B=(s=!0)=>{const e={};o.value.isActive&&o.value.isActive.length>0&&(e.is_active=o.value.isActive),o.value.type&&o.value.type.length>0&&(e.type=o.value.type),o.value.isDefault&&o.value.isDefault.length>0&&(e.is_default=o.value.isDefault),k.value&&(e.search=k.value),m.get(p.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s&&(D.value=!1)}})},se=()=>{o.value={isActive:[],type:[],isDefault:[]},k.value="",m.get(p.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{D.value=!1}})},ae=()=>{v.value.length!==0&&(L.value=!0,g.value=!1)},ie=()=>{if(v.value.length===0)return;g.value=!0;const s=v.value.map(e=>e.id);m.post(p.bulkDelete.url(),{ids:s},{preserveScroll:!0,onSuccess:()=>{g.value=!1,L.value=!1,v.value=[]},onError:()=>{g.value=!1},onFinish:()=>{g.value=!1}})},oe=()=>{L.value=!1,g.value=!1},re=h(()=>{const s=v.value.length;return s===0?"":`Are you sure you want to delete ${s} ${s===1?"price list":"price lists"}?`}),M=h(()=>v.value&&v.value.length>0),ne=s=>({wholesale:"info",retail:"success",custom:"warning",promotional:"danger"})[s]||"secondary";return(s,e)=>{const $=ue("tooltip");return c(),f(pe,null,[a(i(de),{title:"Price Lists"}),a(fe,{title:"Price Lists",breadcrumbs:q.value},{default:u(()=>[t("div",xe,[t("div",he,[t("div",_e,[e[9]||(e[9]=t("i",{class:"pi pi-search search-icon"},null,-1)),a(i(ye),{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),placeholder:"Search",class:"w-full",onKeyup:ce(B,["enter"])},null,8,["modelValue"])]),t("div",we,[t("div",ke,[M.value?(c(),N(i(P),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:ae})):_("",!0),M.value?(c(),f("span",De,n(v.value.length),1)):_("",!0)]),t("div",Ce,[a(i(P),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=l=>D.value=!0)}),V.value>0?(c(),f("span",Se,n(V.value),1)):_("",!0)]),a(i(P),{label:"Add Price List",icon:"pi pi-plus",severity:"primary",onClick:ee,class:"flex-shrink-0"})])]),t("div",Ae,[t("div",Le,[e[10]||(e[10]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Total",-1)),t("div",Ve,n(w.statistics.total||0),1)]),t("div",Pe,[e[11]||(e[11]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Active",-1)),t("div",$e,n(w.statistics.active||0),1)]),t("div",Fe,[e[12]||(e[12]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Default",-1)),t("div",Ue,n(w.statistics.default||0),1)]),t("div",Ne,[e[13]||(e[13]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Wholesale",-1)),t("div",Te,n(w.statistics.wholesale||0),1)])]),t("div",Re,[t("div",je,[j.value.length===0?(c(),f("div",Be,[...e[14]||(e[14]=[t("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),t("p",{class:"text-gray-500"},"No price lists found",-1)])])):(c(),N(i(me),{key:1,value:j.value,paginator:!0,rows:U.value,rowsPerPageOptions:[5,10,20,50],selection:v.value,"onUpdate:selection":e[2]||(e[2]=l=>v.value=l),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","slug","description"],onPage:G},{default:u(()=>[a(i(y),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(y),{header:"#",style:{width:"60px"}},{body:u(l=>[t("div",Me,[t("span",Oe,n(z(l.index)),1)])]),_:1}),a(i(y),{field:"name",header:"Name",sortable:!0},{body:u(l=>[t("div",Ee,[t("span",Ie,n(l.data.name),1),t("span",Ke,n(l.data.slug),1)])]),_:1}),a(i(y),{field:"type",header:"Type",sortable:!0,style:{width:"120px"}},{body:u(l=>[a(i(O),{value:l.data.type,severity:ne(l.data.type)},null,8,["value","severity"])]),_:1}),a(i(y),{field:"currency",header:"Currency",style:{width:"100px"}},{body:u(l=>[t("span",We,n(l.data.currency||"USD"),1)]),_:1}),a(i(y),{field:"priority",header:"Priority",style:{width:"100px"}},{body:u(l=>[t("span",qe,n(l.data.priority),1)]),_:1}),a(i(y),{header:"Status",style:{width:"120px"}},{body:u(l=>[t("div",ze,[a(i(be),{modelValue:l.data.is_active,"onUpdate:modelValue":x=>l.data.is_active=x,onChange:x=>te(l.data.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l.data.is_default?(c(),N(i(O),{key:0,value:"Default",severity:"info"})):_("",!0)])]),_:1}),a(i(y),{header:"Rules",style:{width:"100px"}},{body:u(l=>[t("span",Ge,n(l.data.price_rules?.length||0),1)]),_:1}),a(i(y),{header:"Actions",style:{width:"150px"}},{body:u(l=>[t("div",He,[F((c(),f("button",{onClick:x=>H(l.data.id),class:"text-gray-600 cursor-pointer"},[...e[15]||(e[15]=[t("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Je)),[[$,"View",void 0,{top:!0}]]),F((c(),f("button",{onClick:x=>J(l.data.id),class:"text-blue-600 cursor-pointer"},[...e[16]||(e[16]=[t("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Qe)),[[$,"Edit",void 0,{top:!0}]]),l.data.is_default?_("",!0):F((c(),f("button",{key:0,onClick:x=>le(l.data.id),class:"text-green-600 cursor-pointer"},[...e[17]||(e[17]=[t("i",{class:"pi pi-star text-sm"},null,-1)])],8,Xe)),[[$,"Set as Default",void 0,{top:!0}]]),F((c(),f("button",{onClick:x=>Q(l.data.id,l.data.name),class:"text-red-600 cursor-pointer"},[...e[18]||(e[18]=[t("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Ye)),[[$,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(E,{visible:C.value,"onUpdate:visible":e[3]||(e[3]=l=>C.value=l),title:"Delete Price List",message:Z.value,loading:b.value,onConfirm:X,onCancel:Y},null,8,["visible","message","loading"]),a(E,{visible:L.value,"onUpdate:visible":e[4]||(e[4]=l=>L.value=l),title:"Delete Price Lists",message:re.value,loading:g.value,onConfirm:ie,onCancel:oe},null,8,["visible","message","loading"]),a(i(ge),{visible:D.value,"onUpdate:visible":e[8]||(e[8]=l=>D.value=l),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:u(()=>[...e[19]||(e[19]=[t("div",{class:"flex items-center justify-between w-full pr-8"},[t("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:u(()=>[t("div",at,[a(i(P),{label:"Reset",severity:"secondary",outlined:"",onClick:se}),a(i(P),{label:"Apply Filters",severity:"primary",onClick:B})])]),default:u(()=>[t("div",Ze,[t("div",et,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),a(i(T),{modelValue:o.value.isActive,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.isActive=l),options:I,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),t("div",tt,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-gray-700"},"Type",-1)),a(i(T),{modelValue:o.value.type,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.type=l),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Type",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),t("div",lt,[e[22]||(e[22]=t("label",{class:"text-sm font-medium text-gray-700"},"Default",-1)),a(i(T),{modelValue:o.value.isDefault,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.isDefault=l),options:W,optionLabel:"label",optionValue:"value",placeholder:"Select Default",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),V.value>0?(c(),f("div",st,[e[23]||(e[23]=t("i",{class:"pi pi-info-circle mr-2"},null,-1)),ve(" "+n(V.value)+" "+n(V.value===1?"filter":"filters")+" active ",1)])):_("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{Ft as default};

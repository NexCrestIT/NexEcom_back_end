import{r as n,c as f,q as ce,a as c,o as u,b as s,d as o,h as pe,e as d,f as l,s as ve,k as R,j as L,t as g,n as fe,v as U,i as me,F as ge,p as m}from"./app-CSoXAXzJ.js";import{a as p,_ as ye}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CY8uq29N.js";import{s as be,a as y}from"./index-C1o9GEFB.js";import{s as F}from"./index-rgAG_kXB.js";import{s as xe}from"./index-ClsTdmJU.js";import{s as M}from"./index-uJ02oHJV.js";import{s as he}from"./index-BfQzZyYO.js";import{s as j}from"./index-DPO3fZFO.js";import{_ as O}from"./DeleteConfirmationModal-DQqrJoKX.js";import"./index-L5D_ktCJ.js";import"./useForwardExpose-DJAZBMAY.js";import"./VisuallyHidden-D64JTJ7n.js";import"./RovingFocusGroup-Cj9w1ZFH.js";import"./createLucideIcon-D0VFtXE2.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-BhB5gOq0.js";import"./index-DBsg8l4Z.js";import"./index-MKqwDtgB.js";import"./index-WnAgxEih.js";import"./index-CbxO-fR3.js";import"./index-yX7v5s_a.js";import"./index-BG-nKjgy.js";import"./index-05MKcTrA.js";import"./index-4rJ_OANk.js";import"./index-DvP-GMik.js";const we={class:"flex flex-col gap-6 p-6"},_e={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},Ce={class:"w-full sm:w-auto search-input-wrapper"},ke={class:"flex gap-2"},Ve={class:"relative inline-block"},Se={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Fe={class:"data-table-container"},De={class:"overflow-x-auto"},Ae={key:0,class:"text-center py-12"},$e={class:"text-sm text-gray-600"},Ie={class:"flex items-center gap-3"},Le={key:0,class:"h-10 w-10 rounded overflow-hidden bg-gray-100 flex-shrink-0"},Ue=["src","alt"],je={key:1,class:"flex h-10 w-10 items-center justify-center rounded bg-blue-50 text-blue-600 flex-shrink-0"},Ne={class:"min-w-0"},Te={class:"font-medium text-gray-900 text-sm"},Be={class:"text-xs text-gray-500 truncate max-w-xs"},Re={class:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-700"},Me={key:0,class:"text-sm text-gray-900"},Oe={key:1,class:"text-sm text-gray-400"},Pe={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-3"},Ke=["onClick"],We=["onClick"],qe=["onClick"],ze={class:"flex flex-col gap-6"},Ge={class:"flex flex-col gap-2"},He={class:"flex flex-col gap-2"},Je={class:"flex flex-col gap-2"},Qe={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Xe={class:"flex gap-2 justify-end"},kt={__name:"Index",props:{categories:{type:[Array,Object],default:()=>[]},viewType:{type:String,default:"list"},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({status:null,featured:null,parent_id:null,search:null})},rootCategories:{type:Array,default:()=>[]}},setup(P){const i=P,h=n(i.filters?.search||"");n({});const v=n([]),N=n(0),$=n(10),w=n(!1),r=n({status:i.filters?.status?Array.isArray(i.filters.status)?i.filters.status:[i.filters.status]:[],featured:i.filters?.featured?Array.isArray(i.filters.featured)?i.filters.featured:[i.filters.featured]:[],parentId:i.filters?.parent_id?Array.isArray(i.filters.parent_id)?i.filters.parent_id:[i.filters.parent_id]:[]}),E=[{label:"Active",value:!0},{label:"Inactive",value:!1}],K=[{label:"Featured",value:!0},{label:"Not Featured",value:!1}],W=f(()=>{const a=[{label:"All Categories",value:null}];return i.rootCategories&&i.rootCategories.length>0&&i.rootCategories.forEach(e=>{a.push({label:e.name,value:e.id})}),a}),_=n(!1),b=n(!1),C=n(null),k=n(""),D=n(""),V=n(!1),x=n(!1),q=f(()=>Array.isArray(i.categories)?i.categories:i.categories&&i.categories.data?i.categories.data:[]),T=f(()=>q.value),S=f(()=>{let a=0;return r.value.status&&r.value.status.length>0&&a++,r.value.featured&&r.value.featured.length>0&&a++,r.value.parentId&&r.value.parentId.length>0&&a++,a}),B=(a=!0)=>{const e={};r.value.status&&r.value.status.length>0&&(e.status=r.value.status),r.value.featured&&r.value.featured.length>0&&(e.featured=r.value.featured),r.value.parentId&&r.value.parentId.length>0&&(e.parent_id=r.value.parentId),h.value&&(e.search=h.value),m.get(p.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{a&&(w.value=!1)}})},z=()=>{r.value={status:[],featured:[],parentId:[]},h.value="",m.get(p.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1}})},G=f(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Categories",href:p.index.url()}]),H=a=>{m.visit(p.show.url(a))},J=a=>{m.visit(p.edit.url(a))},Q=(a,e)=>{C.value=a,k.value=e,D.value="All subcategories will also be deleted. This action cannot be undone.",_.value=!0,b.value=!1},X=()=>{C.value&&(b.value=!0,m.delete(p.destroy.url(C.value),{preserveScroll:!0,onSuccess:()=>{b.value=!1,_.value=!1,C.value=null,k.value="",D.value=""},onError:()=>{b.value=!1},onFinish:()=>{b.value=!1}}))},Y=()=>{_.value=!1,C.value=null,k.value="",D.value="",b.value=!1},Z=f(()=>k.value?`Are you sure you want to delete "${k.value}"?`:"Are you sure you want to delete this category?"),ee=()=>{m.visit(p.create.url())},te=a=>{m.post(p.toggleStatus.url(a),{},{preserveScroll:!0})},le=a=>{m.post(p.toggleFeatured.url(a),{},{preserveScroll:!0})},ae=a=>N.value*$.value+a+1,se=a=>{N.value=a.page,$.value=a.rows},re=()=>{v.value.length!==0&&(V.value=!0,x.value=!1)},oe=()=>{if(v.value.length===0)return;x.value=!0;const a=v.value.map(e=>e.id);m.post(p.bulkDelete.url(),{ids:a},{preserveScroll:!0,onSuccess:()=>{x.value=!1,V.value=!1,v.value=[]},onError:()=>{x.value=!1},onFinish:()=>{x.value=!1}})},ie=()=>{V.value=!1,x.value=!1},ne=f(()=>{const a=v.value.length;return a===0?"":`Are you sure you want to delete ${a} ${a===1?"category":"categories"}?`}),ue=f(()=>"All subcategories will also be deleted. This action cannot be undone."),de=f(()=>v.value&&v.value.length>0);return(a,e)=>{const I=ce("tooltip");return u(),c(ge,null,[s(o(pe),{title:"Categories"}),s(ye,{title:"Categories",breadcrumbs:G.value},{default:d(()=>[l("div",we,[l("div",_e,[l("div",Ce,[e[9]||(e[9]=l("i",{class:"pi pi-search search-icon"},null,-1)),s(o(xe),{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=t=>h.value=t),placeholder:"Search",class:"w-full",onKeyup:ve(B,["enter"])},null,8,["modelValue"])]),l("div",ke,[de.value?(u(),R(o(F),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:re})):L("",!0),l("div",Ve,[s(o(F),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>w.value=!0)}),S.value>0?(u(),c("span",Se,g(S.value),1)):L("",!0)]),s(o(F),{label:"Add Category",icon:"pi pi-plus",severity:"primary",onClick:ee,class:"flex-shrink-0"})])]),l("div",Fe,[l("div",De,[T.value.length===0?(u(),c("div",Ae,[...e[10]||(e[10]=[l("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),l("p",{class:"text-gray-500"},"No categories found",-1)])])):(u(),R(o(be),{key:1,value:T.value,paginator:!0,rows:$.value,rowsPerPageOptions:[5,10,20,50],selection:v.value,"onUpdate:selection":e[2]||(e[2]=t=>v.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","description"],onPage:se},{default:d(()=>[s(o(y),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(o(y),{header:"#",style:{width:"60px"}},{body:d(t=>[l("span",$e,g(ae(t.index)),1)]),_:1}),s(o(y),{header:"Category",sortable:!0,sortField:"name"},{body:d(t=>[l("div",Ie,[t.data.image?(u(),c("div",Le,[l("img",{src:t.data.image_url||`/storage/${t.data.image}`,alt:t.data.name,class:"h-full w-full object-cover"},null,8,Ue)])):(u(),c("div",je,[...e[11]||(e[11]=[l("i",{class:"pi pi-folder text-sm"},null,-1)])])),l("div",Ne,[l("p",Te,g(t.data.name),1),l("p",Be,g(t.data.full_path||t.data.name),1)])])]),_:1}),s(o(y),{field:"slug",header:"Slug",sortable:!0},{body:d(t=>[l("code",Re,g(t.data.slug),1)]),_:1}),s(o(y),{header:"Parent",sortable:!0,sortField:"parent_id"},{body:d(t=>[t.data.parent?(u(),c("span",Me,g(t.data.parent.name),1)):(u(),c("span",Oe,"Root"))]),_:1}),s(o(y),{header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:d(t=>[l("div",{class:fe(["table-status-active",t.data.is_active?"status-green":"status-amber"])},[s(o(M),{modelValue:t.data.is_active,"onUpdate:modelValue":A=>te(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])],2)]),_:1}),s(o(y),{header:"Featured",sortable:!0,sortField:"is_featured",style:{width:"100px"}},{body:d(t=>[l("div",Pe,[s(o(M),{modelValue:t.data.is_featured,"onUpdate:modelValue":A=>le(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),s(o(y),{header:"Actions",style:{width:"100px"}},{body:d(t=>[l("div",Ee,[U((u(),c("button",{onClick:A=>H(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[12]||(e[12]=[l("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Ke)),[[I,"View",void 0,{top:!0}]]),U((u(),c("button",{onClick:A=>J(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[13]||(e[13]=[l("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,We)),[[I,"Edit",void 0,{top:!0}]]),U((u(),c("button",{onClick:A=>Q(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[14]||(e[14]=[l("i",{class:"pi pi-trash text-sm"},null,-1)])],8,qe)),[[I,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),s(O,{visible:_.value,"onUpdate:visible":e[3]||(e[3]=t=>_.value=t),title:"Delete Category",message:Z.value,"warning-message":D.value,loading:b.value,onConfirm:X,onCancel:Y},null,8,["visible","message","warning-message","loading"]),s(O,{visible:V.value,"onUpdate:visible":e[4]||(e[4]=t=>V.value=t),title:"Delete Categories",message:ne.value,"warning-message":ue.value,loading:x.value,onConfirm:oe,onCancel:ie},null,8,["visible","message","warning-message","loading"]),s(o(he),{visible:w.value,"onUpdate:visible":e[8]||(e[8]=t=>w.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:d(()=>[...e[15]||(e[15]=[l("div",{class:"flex items-center justify-between w-full pr-8"},[l("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:d(()=>[l("div",Xe,[s(o(F),{label:"Reset",severity:"secondary",outlined:"",onClick:z}),s(o(F),{label:"Apply Filters",severity:"primary",onClick:B})])]),default:d(()=>[l("div",ze,[l("div",Ge,[e[16]||(e[16]=l("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),s(o(j),{modelValue:r.value.status,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.status=t),options:E,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),l("div",He,[e[17]||(e[17]=l("label",{class:"text-sm font-medium text-gray-700"},"Featured",-1)),s(o(j),{modelValue:r.value.featured,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.featured=t),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Featured",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),l("div",Je,[e[18]||(e[18]=l("label",{class:"text-sm font-medium text-gray-700"},"Parent Category",-1)),s(o(j),{modelValue:r.value.parentId,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.parentId=t),options:W.value.filter(t=>t.value!==null),optionLabel:"label",optionValue:"value",placeholder:"Select Parent Categories",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue","options"])]),S.value>0?(u(),c("div",Qe,[e[19]||(e[19]=l("i",{class:"pi pi-info-circle mr-2"},null,-1)),me(" "+g(S.value)+" "+g(S.value===1?"filter":"filters")+" active ",1)])):L("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{kt as default};

import{u as R,r as w,c as S,a as c,o as f,b as a,d as s,h as K,e as q,f as l,g as G,i as g,n as d,j as F,t as b,F as C,l as H,v as J,y as Q,p as W}from"./app-BK2Pf2Of.js";import{_ as r}from"./InputError.vue_vue_type_script_setup_true_lang-CcbTktWY.js";import{F as V,_ as X}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{s as v}from"./index-ByAzzK9e.js";import{s as y}from"./index-CbgF3ImK.js";import{s as h}from"./index-f_JnnQr1.js";import{s as $}from"./index-jPdbgPEm.js";import{s as k}from"./index-BR0xBKiT.js";import{s as _}from"./index-BRHAo3_x.js";import{s as D}from"./index-BxPYidhq.js";import{s as Y}from"./index-i6foZmOP.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-BQA8nYZt.js";import"./index-vBjVw-4p.js";import"./index-DpBsBaFy.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";import"./index-DFN163rb.js";import"./index-BlRmLhx1.js";import"./index-ClpF-97P.js";const Z={class:"flex flex-col gap-4 p-6"},ee={class:"rounded-lg border border-border bg-card p-6"},se={class:"space-y-4"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"flex flex-col gap-2"},oe={class:"flex flex-col gap-2"},ae={class:"flex flex-col gap-2"},de={class:"space-y-4"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"flex flex-col gap-2"},ne={class:"flex flex-col gap-2"},ue={class:"space-y-4"},me={class:"flex flex-col gap-4"},pe={key:0,class:"relative inline-block"},ce=["src"],fe={class:"space-y-4"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"flex flex-col gap-2"},_e={class:"flex flex-col gap-2"},xe={class:"text-muted-foreground"},be={class:"flex flex-col gap-2"},Ve={class:"space-y-4"},ye={class:"flex items-center justify-between border-b pb-2"},we={key:0,class:"text-center py-4 text-gray-500"},Se={class:"flex items-center justify-between mb-2"},ke={class:"text-sm font-medium"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"flex flex-col gap-2"},Ce={class:"flex flex-col gap-2"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e={class:"flex flex-col gap-2"},De={class:"flex flex-col gap-2"},Pe={class:"space-y-4"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Le={class:"flex items-center gap-3"},Me={class:"flex items-center gap-3"},ze={class:"flex flex-col gap-2"},Ee={class:"space-y-4"},Oe={class:"space-y-4"},Ae={class:"flex flex-col gap-2"},Ie={class:"text-muted-foreground"},Ne={class:"flex flex-col gap-2"},Te={class:"text-muted-foreground"},je={class:"flex flex-col gap-2"},Re={class:"flex justify-end gap-2 mt-4 pt-4 border-t"},vs={__name:"Create",props:{products:{type:Array,default:()=>[]}},setup(P){const B=P,t=R({name:"",slug:"",description:"",start_date:null,end_date:null,banner_image:null,discount_type:"percentage",discount_value:null,max_products:null,is_active:!0,is_featured:!1,sort_order:0,meta_title:"",meta_description:"",meta_keywords:"",products:[]}),m=w(null),x=w(!1),u=w([]),U=[{label:"Percentage",value:"percentage"},{label:"Fixed Amount",value:"fixed"}],L=S(()=>t.discount_type==="percentage"?100:null),M=S(()=>B.products.map(i=>({id:i.id,name:`${i.name} (${i.sku}) - $${i.price}`}))),z=S(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Flash Sales",href:V.index.url()},{title:"Create Flash Sale",href:V.create.url()}]),E=()=>{t.name&&(t.slug=t.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))},O=i=>{const e=i.files[0];if(e){t.banner_image=e;const o=new FileReader;o.onload=p=>{m.value=p.target.result},o.readAsDataURL(e)}},A=()=>{t.banner_image=null,m.value=null},I=()=>{u.value.push({product_id:null,discount_type:null,discount_value:null,sort_order:0})},N=i=>{u.value.splice(i,1)},T=()=>{const i=u.value.filter(e=>e.product_id).map(e=>({product_id:e.product_id,discount_type:e.discount_type||null,discount_value:e.discount_value||null,sort_order:e.sort_order||0}));t.transform(e=>({...e,products:i})).post(V.store.url(),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{t.reset(),m.value=null,u.value=[]}})},j=()=>{W.visit(V.index.url())};return(i,e)=>(f(),c(C,null,[a(s(K),{title:"Create Flash Sale"}),a(X,{title:"Create Flash Sale",breadcrumbs:z.value},{default:q(()=>[l("div",Z,[l("div",ee,[l("form",{onSubmit:G(T,["prevent"]),class:"flex flex-col gap-6"},[l("div",se,[e[19]||(e[19]=l("h3",{class:"text-lg font-semibold border-b pb-2"},"Basic Information",-1)),l("div",le,[l("div",te,[e[15]||(e[15]=l("label",{for:"name",class:"text-sm font-medium"},[g(" Flash Sale Name "),l("span",{class:"text-red-500"},"*")],-1)),a(s(y),{id:"name",modelValue:s(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(t).name=o),placeholder:"Enter flash sale name...",onBlur:E,class:d([{"p-invalid":s(t).errors.name},"w-full"])},null,8,["modelValue","class"]),a(r,{message:s(t).errors.name},null,8,["message"])]),l("div",oe,[e[16]||(e[16]=l("label",{for:"slug",class:"text-sm font-medium"},"Slug",-1)),a(s(y),{id:"slug",modelValue:s(t).slug,"onUpdate:modelValue":e[1]||(e[1]=o=>s(t).slug=o),placeholder:"flash-sale-slug",class:d([{"p-invalid":s(t).errors.slug},"w-full"])},null,8,["modelValue","class"]),e[17]||(e[17]=l("small",{class:"text-muted-foreground"},"Leave empty to auto-generate",-1)),a(r,{message:s(t).errors.slug},null,8,["message"])])]),l("div",ae,[e[18]||(e[18]=l("label",{for:"description",class:"text-sm font-medium"},"Description",-1)),a(s(h),{id:"description",modelValue:s(t).description,"onUpdate:modelValue":e[2]||(e[2]=o=>s(t).description=o),placeholder:"Enter flash sale description...",class:d([{"p-invalid":s(t).errors.description},"w-full"]),rows:"3"},null,8,["modelValue","class"]),a(r,{message:s(t).errors.description},null,8,["message"])])]),l("div",de,[e[22]||(e[22]=l("h3",{class:"text-lg font-semibold border-b pb-2"},"Date Range",-1)),l("div",re,[l("div",ie,[e[20]||(e[20]=l("label",{for:"start_date",class:"text-sm font-medium"},[g(" Start Date "),l("span",{class:"text-red-500"},"*")],-1)),a(s(D),{id:"start_date",modelValue:s(t).start_date,"onUpdate:modelValue":e[3]||(e[3]=o=>s(t).start_date=o),showTime:"",hourFormat:"12",class:d([{"p-invalid":s(t).errors.start_date},"w-full"])},null,8,["modelValue","class"]),a(r,{message:s(t).errors.start_date},null,8,["message"])]),l("div",ne,[e[21]||(e[21]=l("label",{for:"end_date",class:"text-sm font-medium"},[g(" End Date "),l("span",{class:"text-red-500"},"*")],-1)),a(s(D),{id:"end_date",modelValue:s(t).end_date,"onUpdate:modelValue":e[4]||(e[4]=o=>s(t).end_date=o),showTime:"",hourFormat:"12",class:d([{"p-invalid":s(t).errors.end_date},"w-full"])},null,8,["modelValue","class"]),a(r,{message:s(t).errors.end_date},null,8,["message"])])])]),l("div",ue,[e[24]||(e[24]=l("h3",{class:"text-lg font-semibold border-b pb-2"},"Banner Image",-1)),l("div",me,[m.value?(f(),c("div",pe,[l("img",{src:m.value,alt:"Banner preview",class:"h-48 w-full object-cover rounded-lg border"},null,8,ce),a(s(v),{type:"button",icon:"pi pi-times",severity:"danger",size:"small",rounded:"",class:"absolute -top-2 -right-2",onClick:A})])):F("",!0),a(s(Y),{mode:"basic",accept:"image/*",maxFileSize:5e6,chooseLabel:"Choose Banner Image",auto:!1,onSelect:O}),e[23]||(e[23]=l("small",{class:"text-muted-foreground"},"Max size: 5MB",-1)),a(r,{message:s(t).errors.banner_image},null,8,["message"])])]),l("div",fe,[e[29]||(e[29]=l("h3",{class:"text-lg font-semibold border-b pb-2"},"Discount Settings",-1)),l("div",ge,[l("div",ve,[e[25]||(e[25]=l("label",{for:"discount_type",class:"text-sm font-medium"},[g(" Discount Type "),l("span",{class:"text-red-500"},"*")],-1)),a(s(k),{id:"discount_type",modelValue:s(t).discount_type,"onUpdate:modelValue":e[5]||(e[5]=o=>s(t).discount_type=o),options:U,optionLabel:"label",optionValue:"value",class:d([{"p-invalid":s(t).errors.discount_type},"w-full"])},null,8,["modelValue","class"]),a(r,{message:s(t).errors.discount_type},null,8,["message"])]),l("div",_e,[e[26]||(e[26]=l("label",{for:"discount_value",class:"text-sm font-medium"},"Discount Value",-1)),a(s(_),{id:"discount_value",modelValue:s(t).discount_value,"onUpdate:modelValue":e[6]||(e[6]=o=>s(t).discount_value=o),min:0,max:L.value,suffix:s(t).discount_type==="percentage"?"%":"$",class:d([{"p-invalid":s(t).errors.discount_value},"w-full"])},null,8,["modelValue","max","suffix","class"]),l("small",xe,b(s(t).discount_type==="percentage"?"Percentage discount (0-100)":"Fixed amount discount"),1),a(r,{message:s(t).errors.discount_value},null,8,["message"])])]),l("div",be,[e[27]||(e[27]=l("label",{for:"max_products",class:"text-sm font-medium"},"Max Products",-1)),a(s(_),{id:"max_products",modelValue:s(t).max_products,"onUpdate:modelValue":e[7]||(e[7]=o=>s(t).max_products=o),min:1,class:d([{"p-invalid":s(t).errors.max_products},"w-full"])},null,8,["modelValue","class"]),e[28]||(e[28]=l("small",{class:"text-muted-foreground"},"Maximum number of products in this flash sale (optional)",-1)),a(r,{message:s(t).errors.max_products},null,8,["message"])])]),l("div",Ve,[l("div",ye,[e[30]||(e[30]=l("h3",{class:"text-lg font-semibold"},"Products",-1)),a(s(v),{type:"button",label:"Add Product",icon:"pi pi-plus",size:"small",onClick:I})]),u.value.length===0?(f(),c("div",we,' No products added. Click "Add Product" to add one. ')):F("",!0),(f(!0),c(C,null,H(u.value,(o,p)=>(f(),c("div",{key:p,class:"border rounded-lg p-4 space-y-4"},[l("div",Se,[l("span",ke,"Product "+b(p+1),1),a(s(v),{type:"button",icon:"pi pi-times",severity:"danger",size:"small",text:"",onClick:n=>N(p)},null,8,["onClick"])]),l("div",Ue,[l("div",Fe,[e[31]||(e[31]=l("label",{class:"text-sm font-medium"},[g("Product "),l("span",{class:"text-red-500"},"*")],-1)),a(s(k),{modelValue:o.product_id,"onUpdate:modelValue":n=>o.product_id=n,options:M.value,optionLabel:"name",optionValue:"id",placeholder:"Select product...",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","options"])]),l("div",Ce,[e[32]||(e[32]=l("label",{class:"text-sm font-medium"},"Discount Type",-1)),a(s(k),{modelValue:o.discount_type,"onUpdate:modelValue":n=>o.discount_type=n,options:U,optionLabel:"label",optionValue:"value",placeholder:"Use flash sale default",showClear:"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),e[33]||(e[33]=l("small",{class:"text-muted-foreground"},"Leave empty to use flash sale default",-1))])]),l("div",he,[l("div",$e,[e[34]||(e[34]=l("label",{class:"text-sm font-medium"},"Discount Value",-1)),a(s(_),{modelValue:o.discount_value,"onUpdate:modelValue":n=>o.discount_value=n,min:0,max:o.discount_type==="percentage"?100:null,suffix:o.discount_type==="percentage"?"%":"$",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","max","suffix"]),e[35]||(e[35]=l("small",{class:"text-muted-foreground"},"Leave empty to use flash sale default",-1))]),l("div",De,[e[36]||(e[36]=l("label",{class:"text-sm font-medium"},"Sort Order",-1)),a(s(_),{modelValue:o.sort_order,"onUpdate:modelValue":n=>o.sort_order=n,min:0,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),l("div",Pe,[e[40]||(e[40]=l("h3",{class:"text-lg font-semibold border-b pb-2"},"Status & Flags",-1)),l("div",Be,[l("div",Le,[a(s($),{modelValue:s(t).is_active,"onUpdate:modelValue":e[8]||(e[8]=o=>s(t).is_active=o),inputId:"is_active"},null,8,["modelValue"]),e[37]||(e[37]=l("label",{for:"is_active",class:"text-sm font-medium cursor-pointer"}," Active ",-1))]),l("div",Me,[a(s($),{modelValue:s(t).is_featured,"onUpdate:modelValue":e[9]||(e[9]=o=>s(t).is_featured=o),inputId:"is_featured"},null,8,["modelValue"]),e[38]||(e[38]=l("label",{for:"is_featured",class:"text-sm font-medium cursor-pointer"}," Featured ",-1))])]),l("div",ze,[e[39]||(e[39]=l("label",{for:"sort_order",class:"text-sm font-medium"},"Sort Order",-1)),a(s(_),{id:"sort_order",modelValue:s(t).sort_order,"onUpdate:modelValue":e[10]||(e[10]=o=>s(t).sort_order=o),min:0,class:d([{"p-invalid":s(t).errors.sort_order},"w-full"])},null,8,["modelValue","class"]),a(r,{message:s(t).errors.sort_order},null,8,["message"])])]),l("div",Ee,[l("div",{class:"flex items-center gap-2 cursor-pointer border-b pb-2",onClick:e[11]||(e[11]=o=>x.value=!x.value)},[l("i",{class:d(x.value?"pi pi-chevron-down":"pi pi-chevron-right")},null,2),e[41]||(e[41]=l("h3",{class:"text-lg font-semibold"},"SEO Settings",-1)),e[42]||(e[42]=l("span",{class:"text-sm text-muted-foreground"},"(optional)",-1))]),J(l("div",Oe,[l("div",Ae,[e[43]||(e[43]=l("label",{for:"meta_title",class:"text-sm font-medium"},"Meta Title",-1)),a(s(y),{id:"meta_title",modelValue:s(t).meta_title,"onUpdate:modelValue":e[12]||(e[12]=o=>s(t).meta_title=o),placeholder:"SEO title...",class:d({"p-invalid":s(t).errors.meta_title})},null,8,["modelValue","class"]),l("small",Ie,b(s(t).meta_title?.length||0)+"/255 characters ",1),a(r,{message:s(t).errors.meta_title},null,8,["message"])]),l("div",Ne,[e[44]||(e[44]=l("label",{for:"meta_description",class:"text-sm font-medium"},"Meta Description",-1)),a(s(h),{id:"meta_description",modelValue:s(t).meta_description,"onUpdate:modelValue":e[13]||(e[13]=o=>s(t).meta_description=o),placeholder:"SEO description...",rows:"3",class:d({"p-invalid":s(t).errors.meta_description})},null,8,["modelValue","class"]),l("small",Te,b(s(t).meta_description?.length||0)+"/500 characters ",1),a(r,{message:s(t).errors.meta_description},null,8,["message"])]),l("div",je,[e[45]||(e[45]=l("label",{for:"meta_keywords",class:"text-sm font-medium"},"Meta Keywords",-1)),a(s(y),{id:"meta_keywords",modelValue:s(t).meta_keywords,"onUpdate:modelValue":e[14]||(e[14]=o=>s(t).meta_keywords=o),placeholder:"keyword1, keyword2, keyword3...",class:d({"p-invalid":s(t).errors.meta_keywords})},null,8,["modelValue","class"]),a(r,{message:s(t).errors.meta_keywords},null,8,["message"])])],512),[[Q,x.value]])]),l("div",Re,[a(s(v),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:j}),a(s(v),{type:"submit",label:"Create Flash Sale",icon:"pi pi-check",loading:s(t).processing,disabled:s(t).processing},null,8,["loading","disabled"])])],32)])])]),_:1},8,["breadcrumbs"])],64))}};export{vs as default};

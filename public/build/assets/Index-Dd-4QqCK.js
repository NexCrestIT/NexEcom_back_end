import{r,c as x,q as re,a as c,o as n,b as a,d as i,h as ne,e as v,f as l,s as ue,k as R,j as y,t as b,v as L,i as de,F as ce,p as f}from"./app-BK2Pf2Of.js";import{b as p,_ as ve}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{s as pe,a as _}from"./index-BwoVAJgh.js";import{s as D}from"./index-ByAzzK9e.js";import{s as fe}from"./index-CbgF3ImK.js";import{s as E}from"./index-jPdbgPEm.js";import{s as me}from"./index-NBNEWn_O.js";import{s as T}from"./index-DR1Syb5x.js";import{_ as M}from"./DeleteConfirmationModal-C5XRjHbV.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DpBsBaFy.js";import"./index-vBjVw-4p.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";import"./index-BRHAo3_x.js";import"./index-DFN163rb.js";import"./index-B1miUTR4.js";import"./index-ClpF-97P.js";import"./index-BQA8nYZt.js";import"./index-BWwgyFsG.js";const ge={class:"flex flex-col gap-6 p-6"},be={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},he={class:"w-full sm:w-auto search-input-wrapper"},xe={class:"flex gap-2"},ye={class:"relative inline-block"},_e={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},we={class:"relative inline-block"},ke={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Ce={class:"data-table-container"},Fe={class:"overflow-x-auto"},Ve={key:0,class:"text-center py-12"},Se={class:"flex items-center h-full"},Ae={class:"text-sm text-gray-600"},De={class:"flex items-center h-full gap-3"},$e=["src","alt"],Ue={class:"flex flex-col"},Le={class:"font-medium text-gray-900"},Ne={key:0,class:"text-xs text-gray-500 truncate max-w-xs"},je={class:"flex items-center gap-3"},Be=["onClick"],Pe=["onClick"],Re=["onClick"],Ee={class:"flex flex-col gap-6"},Te={class:"flex flex-col gap-2"},Me={class:"flex flex-col gap-2"},Oe={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Ie={class:"flex gap-2 justify-end"},mt={__name:"Index",props:{collections:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,is_featured:null,search:null})}},setup(O){const u=O,w=r(u.filters?.search||""),d=r([]),N=r(0),$=r(10),k=r(!1),o=r({isActive:u.filters?.is_active?Array.isArray(u.filters.is_active)?u.filters.is_active:[u.filters.is_active]:[],isFeatured:u.filters?.is_featured?Array.isArray(u.filters.is_featured)?u.filters.is_featured:[u.filters.is_featured]:[]}),I=[{label:"Active",value:!0},{label:"Inactive",value:!1}],K=[{label:"Featured",value:!0},{label:"Not Featured",value:!1}],C=r(!1),m=r(!1),F=r(null),V=r(""),S=r(!1),g=r(!1),j=x(()=>u.collections),q=x(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Collections",href:p.index.url()}]),z=s=>N.value*$.value+s+1,G=s=>{N.value=s.page,$.value=s.rows},H=s=>{f.visit(p.show.url(s))},J=s=>{f.visit(p.edit.url(s))},Q=(s,e)=>{F.value=s,V.value=e,C.value=!0,m.value=!1},W=()=>{F.value&&(m.value=!0,f.delete(p.destroy.url(F.value),{preserveScroll:!0,onSuccess:()=>{m.value=!1,C.value=!1,F.value=null,V.value=""},onError:()=>{m.value=!1},onFinish:()=>{m.value=!1}}))},X=()=>{C.value=!1,F.value=null,V.value="",m.value=!1},Y=x(()=>V.value?`Are you sure you want to delete "${V.value}"?`:"Are you sure you want to delete this collection?"),Z=()=>{f.visit(p.create.url())},ee=s=>{f.post(p.toggleStatus.url(s),{},{preserveScroll:!0})},te=s=>{f.post(p.toggleFeatured.url(s),{},{preserveScroll:!0})},A=x(()=>{let s=0;return o.value.isActive&&o.value.isActive.length>0&&s++,o.value.isFeatured&&o.value.isFeatured.length>0&&s++,s}),B=(s=!0)=>{const e={};o.value.isActive&&o.value.isActive.length>0&&(e.is_active=o.value.isActive),o.value.isFeatured&&o.value.isFeatured.length>0&&(e.is_featured=o.value.isFeatured),w.value&&(e.search=w.value),f.get(p.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s&&(k.value=!1)}})},le=()=>{o.value={isActive:[],isFeatured:[]},w.value="",f.get(p.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{k.value=!1}})},se=()=>{d.value.length!==0&&(S.value=!0,g.value=!1)},ae=()=>{if(d.value.length===0)return;g.value=!0;const s=d.value.map(e=>e.id);f.post(p.bulkDelete.url(),{ids:s},{preserveScroll:!0,onSuccess:()=>{g.value=!1,S.value=!1,d.value=[]},onError:()=>{g.value=!1},onFinish:()=>{g.value=!1}})},ie=()=>{S.value=!1,g.value=!1},oe=x(()=>{const s=d.value.length;return s===0?"":`Are you sure you want to delete ${s} ${s===1?"collection":"collections"}?`}),P=x(()=>d.value&&d.value.length>0);return(s,e)=>{const U=re("tooltip");return n(),c(ce,null,[a(i(ne),{title:"Collections"}),a(ve,{title:"Collections",breadcrumbs:q.value},{default:v(()=>[l("div",ge,[l("div",be,[l("div",he,[e[9]||(e[9]=l("i",{class:"pi pi-search search-icon"},null,-1)),a(i(fe),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t),placeholder:"Search",class:"w-full",onKeyup:ue(B,["enter"])},null,8,["modelValue"])]),l("div",xe,[l("div",ye,[P.value?(n(),R(i(D),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:se})):y("",!0),P.value?(n(),c("span",_e,b(d.value.length),1)):y("",!0)]),l("div",we,[a(i(D),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>k.value=!0)}),A.value>0?(n(),c("span",ke,b(A.value),1)):y("",!0)]),a(i(D),{label:"Add Collection",icon:"pi pi-plus",severity:"primary",onClick:Z,class:"flex-shrink-0"})])]),l("div",Ce,[l("div",Fe,[j.value.length===0?(n(),c("div",Ve,[...e[10]||(e[10]=[l("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),l("p",{class:"text-gray-500"},"No collections found",-1)])])):(n(),R(i(pe),{key:1,value:j.value,paginator:!0,rows:$.value,rowsPerPageOptions:[5,10,20,50],selection:d.value,"onUpdate:selection":e[3]||(e[3]=t=>d.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","description"],onPage:G},{default:v(()=>[a(i(_),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(_),{header:"#",style:{width:"60px"}},{body:v(t=>[l("div",Se,[l("span",Ae,b(z(t.index)),1)])]),_:1}),a(i(_),{field:"name",header:"Collection Name",sortable:!0},{body:v(t=>[l("div",De,[t.data.image_url?(n(),c("img",{key:0,src:t.data.image_url,alt:t.data.name,class:"w-10 h-10 object-contain rounded",onError:e[2]||(e[2]=h=>h.target.style.display="none")},null,40,$e)):y("",!0),l("div",Ue,[l("span",Le,b(t.data.name),1),t.data.description?(n(),c("span",Ne,b(t.data.description),1)):y("",!0)])])]),_:1}),a(i(_),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:v(t=>[a(i(E),{modelValue:t.data.is_active,"onUpdate:modelValue":h=>ee(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(_),{field:"is_featured",header:"Featured",sortable:!0,sortField:"is_featured",style:{width:"120px"}},{body:v(t=>[a(i(E),{modelValue:t.data.is_featured,"onUpdate:modelValue":h=>te(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(_),{header:"Actions",style:{width:"100px"}},{body:v(t=>[l("div",je,[L((n(),c("button",{onClick:h=>H(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[11]||(e[11]=[l("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Be)),[[U,"View",void 0,{top:!0}]]),L((n(),c("button",{onClick:h=>J(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[12]||(e[12]=[l("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Pe)),[[U,"Edit",void 0,{top:!0}]]),L((n(),c("button",{onClick:h=>Q(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[13]||(e[13]=[l("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Re)),[[U,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(M,{visible:C.value,"onUpdate:visible":e[4]||(e[4]=t=>C.value=t),title:"Delete Collection",message:Y.value,loading:m.value,onConfirm:W,onCancel:X},null,8,["visible","message","loading"]),a(M,{visible:S.value,"onUpdate:visible":e[5]||(e[5]=t=>S.value=t),title:"Delete Collections",message:oe.value,loading:g.value,onConfirm:ae,onCancel:ie},null,8,["visible","message","loading"]),a(i(me),{visible:k.value,"onUpdate:visible":e[8]||(e[8]=t=>k.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:v(()=>[...e[14]||(e[14]=[l("div",{class:"flex items-center justify-between w-full pr-8"},[l("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:v(()=>[l("div",Ie,[a(i(D),{label:"Reset",severity:"secondary",outlined:"",onClick:le}),a(i(D),{label:"Apply Filters",severity:"primary",onClick:B})])]),default:v(()=>[l("div",Ee,[l("div",Te,[e[15]||(e[15]=l("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),a(i(T),{modelValue:o.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.isActive=t),options:I,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),l("div",Me,[e[16]||(e[16]=l("label",{class:"text-sm font-medium text-gray-700"},"Featured",-1)),a(i(T),{modelValue:o.value.isFeatured,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.isFeatured=t),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Featured",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),A.value>0?(n(),c("div",Oe,[e[17]||(e[17]=l("i",{class:"pi pi-info-circle mr-2"},null,-1)),de(" "+b(A.value)+" "+b(A.value===1?"filter":"filters")+" active ",1)])):y("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{mt as default};

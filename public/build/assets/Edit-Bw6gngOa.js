import{u as P,r as f,m as M,c as v,a as b,o as x,b as l,d as s,h as N,e as A,f as t,g as O,i as B,n as _,j as L,v as j,t as m,y as z,F as R,p as V}from"./app-nZ486FH-.js";import{_ as i}from"./InputError.vue_vue_type_script_setup_true_lang-BA97093D.js";import{C as p,_ as G}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DlZa9EoC.js";import{s as g}from"./index-TtdGbCEO.js";import{s as c}from"./index-BpaVQjfu.js";import{s as w}from"./index-BmdAbA5q.js";import{s as T}from"./index-CdsES4qx.js";import{s as C}from"./index-C_efGWwB.js";import{s as q}from"./index-D29InjjQ.js";import{s as J}from"./index-CWG0HDUv.js";import"./index-CHK9YDbT.js";import"./useForwardExpose-DRgSMGS6.js";import"./VisuallyHidden-Ctde3iQv.js";import"./RovingFocusGroup-BJ6ex-50.js";import"./createLucideIcon-IGbS4iJz.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-D-YufhEa.js";import"./index-wUJh2Se0.js";import"./index-DDdz4gGK.js";import"./index-BGmOkUyG.js";import"./index-za1w8YqQ.js";import"./index-DcpomhCc.js";const K={class:"flex flex-col gap-4 p-6"},W={class:"rounded-lg border border-border bg-card p-6"},H={class:"space-y-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"flex flex-col gap-2"},Y={class:"flex flex-col gap-2"},Z={class:"flex flex-col gap-2"},ee={class:"flex flex-col gap-2"},te={class:"space-y-4"},se={class:"flex flex-col gap-4"},oe={key:0,class:"relative inline-block"},le=["src"],ae={class:"space-y-4"},re={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ie={class:"flex items-center gap-3"},de={class:"flex items-center gap-3"},ne={class:"flex flex-col gap-2"},me={class:"space-y-4"},ue={class:"space-y-4"},pe={class:"flex flex-col gap-2"},ge={class:"text-muted-foreground"},ce={class:"flex flex-col gap-2"},fe={class:"text-muted-foreground"},ye={class:"flex flex-col gap-2"},ve={class:"space-y-2 p-4 bg-muted/50 rounded-lg"},be={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},xe={class:"ml-1 font-medium"},_e={class:"ml-1 font-medium"},Ve={class:"ml-1 font-medium"},we={class:"ml-1 font-medium"},Ce={class:"flex justify-between gap-2 mt-4 pt-4 border-t"},ke={class:"flex gap-2"},We={__name:"Edit",props:{category:{type:Object,required:!0},parentCategories:{type:Array,default:()=>[]}},setup(d){const r=d,o=P({_method:"PUT",name:r.category.name||"",slug:r.category.slug||"",description:r.category.description||"",parent_id:r.category.parent_id||null,is_active:r.category.is_active??!0,is_featured:r.category.is_featured??!1,sort_order:r.category.sort_order||0,meta_title:r.category.meta_title||"",meta_description:r.category.meta_description||"",meta_keywords:r.category.meta_keywords||"",image:null,remove_image:!1}),n=f(null),u=f(!1),k=f(r.category.image);M(()=>{r.category.image&&(n.value=r.category.image_url||`/storage/${r.category.image}`),(r.category.meta_title||r.category.meta_description||r.category.meta_keywords)&&(u.value=!0)});const h=v(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Categories",href:p.index.url()},{title:r.category.name,href:p.edit.url(r.category.id)}]),S=v(()=>[{id:null,name:"— None (Root Category) —"},...r.parentCategories]),I=y=>{const e=y.files[0];if(e){o.image=e,o.remove_image=!1;const a=new FileReader;a.onload=F=>{n.value=F.target.result},a.readAsDataURL(e)}},U=()=>{o.image=null,o.remove_image=!0,n.value=null,k.value=null};function $(){o.post(p.update.url(r.category.id),{preserveScroll:!0,forceFormData:!0})}function D(){V.visit(p.index.url())}function E(){confirm("Are you sure you want to delete this category? All subcategories will also be deleted.")&&V.delete(p.destroy.url(r.category.id))}return(y,e)=>(x(),b(R,null,[l(s(N),{title:`Edit ${d.category.name}`},null,8,["title"]),l(G,{title:`Edit: ${d.category.name}`,breadcrumbs:h.value},{default:A(()=>[t("div",K,[t("div",W,[t("form",{onSubmit:O($,["prevent"]),class:"flex flex-col gap-6"},[t("div",H,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold border-b pb-2"},"Basic Information",-1)),t("div",Q,[t("div",X,[e[11]||(e[11]=t("label",{for:"name",class:"text-sm font-medium"},[B(" Name "),t("span",{class:"text-red-500"},"*")],-1)),l(s(c),{id:"name",modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>s(o).name=a),placeholder:"Enter category name..."},null,8,["modelValue"]),l(i,{message:s(o).errors.name},null,8,["message"])]),t("div",Y,[e[12]||(e[12]=t("label",{for:"slug",class:"text-sm font-medium"}," Slug ",-1)),l(s(c),{id:"slug",modelValue:s(o).slug,"onUpdate:modelValue":e[1]||(e[1]=a=>s(o).slug=a),placeholder:"category-slug"},null,8,["modelValue"]),l(i,{message:s(o).errors.slug},null,8,["message"])])]),t("div",Z,[e[13]||(e[13]=t("label",{for:"description",class:"text-sm font-medium"},"Description",-1)),l(s(w),{id:"description",modelValue:s(o).description,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).description=a),placeholder:"Enter category description...",rows:"4",class:_({"p-invalid":s(o).errors.description})},null,8,["modelValue","class"]),l(i,{message:s(o).errors.description},null,8,["message"])]),t("div",ee,[e[14]||(e[14]=t("label",{for:"parent_id",class:"text-sm font-medium"},"Parent Category",-1)),l(s(T),{id:"parent_id",modelValue:s(o).parent_id,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).parent_id=a),options:S.value,optionLabel:"name",optionValue:"id",placeholder:"Select parent category...",showClear:"",class:"w-full"},null,8,["modelValue","options"]),e[15]||(e[15]=t("small",{class:"text-muted-foreground"},"Leave empty to make this a root category",-1)),l(i,{message:s(o).errors.parent_id},null,8,["message"])])]),t("div",te,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold border-b pb-2"},"Category Image",-1)),t("div",se,[n.value?(x(),b("div",oe,[t("img",{src:n.value,alt:"Preview",class:"h-32 w-32 object-cover rounded-lg border"},null,8,le),l(s(g),{type:"button",icon:"pi pi-times",severity:"danger",size:"small",rounded:"",class:"absolute -top-2 -right-2",onClick:U})])):L("",!0),l(s(J),{mode:"basic",accept:"image/*",maxFileSize:2e6,chooseLabel:n.value?"Change Image":"Choose Image",auto:!1,onSelect:I},null,8,["chooseLabel"]),e[17]||(e[17]=t("small",{class:"text-muted-foreground"},"Accepted formats: JPEG, PNG, GIF, WebP. Max size: 2MB",-1)),l(i,{message:s(o).errors.image},null,8,["message"])])]),t("div",ae,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold border-b pb-2"},"Settings",-1)),t("div",re,[t("div",ie,[l(s(C),{modelValue:s(o).is_active,"onUpdate:modelValue":e[4]||(e[4]=a=>s(o).is_active=a),inputId:"is_active"},null,8,["modelValue"]),e[19]||(e[19]=t("label",{for:"is_active",class:"text-sm font-medium cursor-pointer"}," Active ",-1))]),t("div",de,[l(s(C),{modelValue:s(o).is_featured,"onUpdate:modelValue":e[5]||(e[5]=a=>s(o).is_featured=a),inputId:"is_featured"},null,8,["modelValue"]),e[20]||(e[20]=t("label",{for:"is_featured",class:"text-sm font-medium cursor-pointer"}," Featured ",-1))]),t("div",ne,[e[21]||(e[21]=t("label",{for:"sort_order",class:"text-sm font-medium"},"Sort Order",-1)),l(s(q),{id:"sort_order",modelValue:s(o).sort_order,"onUpdate:modelValue":e[6]||(e[6]=a=>s(o).sort_order=a),min:0},null,8,["modelValue"]),l(i,{message:s(o).errors.sort_order},null,8,["message"])])])]),t("div",me,[t("div",{class:"flex items-center gap-2 cursor-pointer border-b pb-2",onClick:e[7]||(e[7]=a=>u.value=!u.value)},[t("i",{class:_(u.value?"pi pi-chevron-down":"pi pi-chevron-right")},null,2),e[23]||(e[23]=t("h3",{class:"text-lg font-semibold"},"SEO Settings",-1)),e[24]||(e[24]=t("span",{class:"text-sm text-muted-foreground"},"(optional)",-1))]),j(t("div",ue,[t("div",pe,[e[25]||(e[25]=t("label",{for:"meta_title",class:"text-sm font-medium"},"Meta Title",-1)),l(s(c),{id:"meta_title",modelValue:s(o).meta_title,"onUpdate:modelValue":e[8]||(e[8]=a=>s(o).meta_title=a),placeholder:"SEO title..."},null,8,["modelValue"]),t("small",ge,m(s(o).meta_title?.length||0)+"/255 characters ",1),l(i,{message:s(o).errors.meta_title},null,8,["message"])]),t("div",ce,[e[26]||(e[26]=t("label",{for:"meta_description",class:"text-sm font-medium"},"Meta Description",-1)),l(s(w),{id:"meta_description",modelValue:s(o).meta_description,"onUpdate:modelValue":e[9]||(e[9]=a=>s(o).meta_description=a),placeholder:"SEO description...",rows:"3"},null,8,["modelValue"]),t("small",fe,m(s(o).meta_description?.length||0)+"/500 characters ",1),l(i,{message:s(o).errors.meta_description},null,8,["message"])]),t("div",ye,[e[27]||(e[27]=t("label",{for:"meta_keywords",class:"text-sm font-medium"},"Meta Keywords",-1)),l(s(c),{id:"meta_keywords",modelValue:s(o).meta_keywords,"onUpdate:modelValue":e[10]||(e[10]=a=>s(o).meta_keywords=a),placeholder:"keyword1, keyword2, keyword3..."},null,8,["modelValue"]),l(i,{message:s(o).errors.meta_keywords},null,8,["message"])])],512),[[z,u.value]])]),t("div",ve,[e[32]||(e[32]=t("h4",{class:"text-sm font-medium text-muted-foreground"},"Category Information",-1)),t("div",be,[t("div",null,[e[28]||(e[28]=t("span",{class:"text-muted-foreground"},"ID:",-1)),t("span",xe,m(d.category.id),1)]),t("div",null,[e[29]||(e[29]=t("span",{class:"text-muted-foreground"},"Depth:",-1)),t("span",_e,m(d.category.depth||0),1)]),t("div",null,[e[30]||(e[30]=t("span",{class:"text-muted-foreground"},"Children:",-1)),t("span",Ve,m(d.category.children?.length||0),1)]),t("div",null,[e[31]||(e[31]=t("span",{class:"text-muted-foreground"},"Path:",-1)),t("span",we,m(d.category.full_path),1)])])]),t("div",Ce,[l(s(g),{type:"button",label:"Delete Category",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:E}),t("div",ke,[l(s(g),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:D}),l(s(g),{type:"submit",label:"Update Category",icon:"pi pi-check",loading:s(o).processing,disabled:s(o).processing},null,8,["loading","disabled"])])])],32)])])]),_:1},8,["title","breadcrumbs"])],64))}};export{We as default};

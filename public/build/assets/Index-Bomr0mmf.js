import{L as c,_ as W}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-Dttp5iz6.js";import{r as o,c as g,q as X,a as v,o as n,b as r,d as i,h as Y,e as h,f as l,k as N,j as V,t as L,v as D,F as Z,p as x}from"./app-BK2Pf2Of.js";import{s as ee,a as _}from"./index-BwoVAJgh.js";import{s as F}from"./index-ByAzzK9e.js";import{s as te}from"./index-CbgF3ImK.js";import{_ as A}from"./DeleteConfirmationModal-C5XRjHbV.js";import"./index-CQY5XXk-.js";import"./useForwardExpose-Aj-X7GuJ.js";import"./VisuallyHidden-CM4-6sg1.js";import"./RovingFocusGroup-CjnzX16-.js";import"./createLucideIcon-CU3Joau-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DpBsBaFy.js";import"./index-vBjVw-4p.js";import"./index-BfUF3OBm.js";import"./index-Bv74yKGD.js";import"./index-BRHAo3_x.js";import"./index-DFN163rb.js";import"./index-B1miUTR4.js";import"./index-ClpF-97P.js";import"./index-BQA8nYZt.js";import"./index-BWwgyFsG.js";const le={class:"flex flex-col gap-6 p-6"},se={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},ae={class:"w-full sm:w-auto search-input-wrapper"},oe={class:"flex gap-2"},re={class:"relative inline-block"},ie={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},ne={class:"data-table-container"},ue={class:"overflow-x-auto"},de={key:0,class:"text-center py-12"},ce={class:"flex items-center h-full"},ve={class:"text-sm text-gray-600"},pe={class:"flex items-center h-full"},me={class:"font-medium text-gray-900"},fe={class:"flex items-center gap-3"},be=["onClick"],ge=["onClick"],he=["onClick"],qe={__name:"Index",props:{labels:{type:Array,default:()=>[]}},setup(R){const C=R,w=o(""),a=o([]),P=o(0),y=o(10),p=o(!1),u=o(!1),m=o(null),f=o(""),b=o(!1),d=o(!1),$=g(()=>{if(!w.value)return C.labels;const t=w.value.toLowerCase();return C.labels.filter(e=>e.name.toLowerCase().includes(t))}),E=g(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Labels",href:c.index.url()}]),M=t=>P.value*y.value+t+1,U=t=>{P.value=t.page,y.value=t.rows},j=t=>{x.visit(c.show.url(t))},I=t=>{x.visit(c.edit.url(t))},T=(t,e)=>{m.value=t,f.value=e,p.value=!0,u.value=!1},q=()=>{m.value&&(u.value=!0,x.delete(c.destroy.url(m.value),{preserveScroll:!0,onSuccess:()=>{u.value=!1,p.value=!1,m.value=null,f.value=""},onError:()=>{u.value=!1},onFinish:()=>{u.value=!1}}))},K=()=>{p.value=!1,m.value=null,f.value="",u.value=!1},O=g(()=>f.value?`Are you sure you want to delete "${f.value}"?`:"Are you sure you want to delete this label?"),z=()=>{x.visit(c.create.url())},G=()=>{a.value.length!==0&&(b.value=!0,d.value=!1)},H=()=>{if(a.value.length===0)return;d.value=!0;const t=a.value.map(e=>e.id);x.post(c.bulkDelete.url(),{ids:t},{preserveScroll:!0,onSuccess:()=>{d.value=!1,b.value=!1,a.value=[]},onError:()=>{d.value=!1},onFinish:()=>{d.value=!1}})},J=()=>{b.value=!1,d.value=!1},Q=g(()=>{const t=a.value.length;return t===0?"":`Are you sure you want to delete ${t} ${t===1?"label":"labels"}?`}),S=g(()=>a.value&&a.value.length>0);return(t,e)=>{const k=X("tooltip");return n(),v(Z,null,[r(i(Y),{title:"Labels"}),r(W,{title:"Labels",breadcrumbs:E.value},{default:h(()=>[l("div",le,[l("div",se,[l("div",ae,[e[4]||(e[4]=l("i",{class:"pi pi-search search-icon"},null,-1)),r(i(te),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),placeholder:"Search",class:"w-full"},null,8,["modelValue"])]),l("div",oe,[l("div",re,[S.value?(n(),N(i(F),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:G})):V("",!0),S.value?(n(),v("span",ie,L(a.value.length),1)):V("",!0)]),r(i(F),{label:"Add Label",icon:"pi pi-plus",severity:"primary",onClick:z,class:"flex-shrink-0"})])]),l("div",ne,[l("div",ue,[$.value.length===0?(n(),v("div",de,[...e[5]||(e[5]=[l("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),l("p",{class:"text-gray-500"},"No labels found",-1)])])):(n(),N(i(ee),{key:1,value:$.value,paginator:!0,rows:y.value,rowsPerPageOptions:[5,10,20,50],selection:a.value,"onUpdate:selection":e[1]||(e[1]=s=>a.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name"],onPage:U},{default:h(()=>[r(i(_),{selectionMode:"multiple",headerStyle:"width: 3rem"}),r(i(_),{header:"#",style:{width:"60px"}},{body:h(s=>[l("div",ce,[l("span",ve,L(M(s.index)),1)])]),_:1}),r(i(_),{field:"name",header:"Label Name",sortable:!0},{body:h(s=>[l("div",pe,[l("span",me,L(s.data.name),1)])]),_:1}),r(i(_),{header:"Actions",style:{width:"100px"}},{body:h(s=>[l("div",fe,[D((n(),v("button",{onClick:B=>j(s.data.id),class:"text-gray-600 cursor-pointer"},[...e[6]||(e[6]=[l("i",{class:"pi pi-eye text-sm"},null,-1)])],8,be)),[[k,"View",void 0,{top:!0}]]),D((n(),v("button",{onClick:B=>I(s.data.id),class:"text-blue-600 cursor-pointer"},[...e[7]||(e[7]=[l("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,ge)),[[k,"Edit",void 0,{top:!0}]]),D((n(),v("button",{onClick:B=>T(s.data.id,s.data.name),class:"text-red-600 cursor-pointer"},[...e[8]||(e[8]=[l("i",{class:"pi pi-trash text-sm"},null,-1)])],8,he)),[[k,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),r(A,{visible:p.value,"onUpdate:visible":e[2]||(e[2]=s=>p.value=s),title:"Delete Label",message:O.value,loading:u.value,onConfirm:q,onCancel:K},null,8,["visible","message","loading"]),r(A,{visible:b.value,"onUpdate:visible":e[3]||(e[3]=s=>b.value=s),title:"Delete Labels",message:Q.value,loading:d.value,onConfirm:H,onCancel:J},null,8,["visible","message","loading"])]),_:1},8,["breadcrumbs"])],64)}}};export{qe as default};

import{r as d,c as h,q as ue,a as c,o as n,b as o,d as a,h as de,e as u,f as t,s as ce,k as R,j as V,t as r,v as $,i as ve,F as pe,p as m}from"./app-g_uq3P9Q.js";import{I as v,_ as fe}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjP68X9r.js";import{s as me,a as b}from"./index-CSEaDcPC.js";import{s as g}from"./index-B_MRzLld.js";import{s as be}from"./index-DW7toPKJ.js";import{s as ye}from"./index-2ss-twuS.js";import{s as U}from"./index-CP_oih1b.js";import{s as q}from"./index-DI7avG2Q.js";import{_ as E}from"./DeleteConfirmationModal-DHEZnWn4.js";import"./index-dWEWYs2j.js";import"./useForwardExpose-CxWsbAvG.js";import"./VisuallyHidden-BIE4ZmuB.js";import"./RovingFocusGroup-DoPalDKS.js";import"./createLucideIcon-Cn-To4t-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-CFvIkJt3.js";import"./index-Diih4kcu.js";import"./index-CPL-5HGm.js";import"./index-DqafScSn.js";import"./index-C3A8jhMi.js";import"./index-Cnk_WgH2.js";import"./index-KNfTspns.js";import"./index-AOL12p5l.js";import"./index-DA5wfV1C.js";import"./index-CZBIT8sJ.js";const xe={class:"flex flex-col gap-6 p-6"},ge={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},he={class:"w-full sm:w-auto search-input-wrapper"},ke={class:"flex gap-2"},_e={class:"relative inline-block"},we={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},Se={class:"relative inline-block"},Ce={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},De={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ie={class:"rounded-lg border border-border bg-card p-4"},Le={class:"text-2xl font-bold"},Ae={class:"rounded-lg border border-border bg-card p-4"},Ve={class:"text-2xl font-bold text-green-600"},$e={class:"rounded-lg border border-border bg-card p-4"},Fe={class:"text-2xl font-bold text-red-600"},je={class:"rounded-lg border border-border bg-card p-4"},Ne={class:"text-2xl font-bold text-yellow-600"},Pe={class:"data-table-container"},Me={class:"overflow-x-auto"},Be={key:0,class:"text-center py-12"},Oe={class:"flex items-center h-full"},Re={class:"text-sm text-gray-600"},Ue={class:"flex flex-col"},qe={class:"font-medium text-gray-900"},Ee={class:"text-xs text-gray-500"},Te={class:"flex flex-col"},Ke={class:"font-medium"},We={class:"text-xs text-gray-500"},Qe={class:"text-sm"},ze={key:0,class:"text-sm"},Ge={key:1,class:"text-sm text-gray-400"},He={class:"flex items-center gap-3"},Je=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze=["onClick"],et={class:"flex flex-col gap-6"},tt={class:"flex flex-col gap-2"},st={class:"flex flex-col gap-2"},lt={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},ot={class:"flex gap-2 justify-end"},$t={__name:"Index",props:{inventory:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({product_id:null,location:null,stock_status:null,search:null})}},setup(k){const p=k,_=d(p.filters?.search||""),f=d([]),N=d(0),F=d(10),w=d(!1),i=d({stockStatus:p.filters?.stock_status?Array.isArray(p.filters.stock_status)?p.filters.stock_status:[p.filters.stock_status]:[],location:p.filters?.location?Array.isArray(p.filters.location)?p.filters.location:[p.filters.location]:[]}),T=[{label:"In Stock",value:"in_stock"},{label:"Out of Stock",value:"out_of_stock"},{label:"Low Stock",value:"low_stock"}],K=[{label:"Main",value:"main"},{label:"Warehouse 1",value:"warehouse_1"},{label:"Warehouse 2",value:"warehouse_2"},{label:"Store",value:"store"}],S=d(!1),y=d(!1),C=d(null),D=d(""),I=d(!1),x=d(!1),P=h(()=>p.inventory),W=h(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Inventory",href:v.index.url()}]),Q=l=>N.value*F.value+l+1,z=l=>{N.value=l.page,F.value=l.rows},G=l=>{m.visit(v.show.url(l))},H=l=>{m.visit(v.edit.url(l))},J=(l,e)=>{C.value=l,D.value=e,S.value=!0,y.value=!1},X=()=>{C.value&&(y.value=!0,m.delete(v.destroy.url(C.value),{preserveScroll:!0,onSuccess:()=>{y.value=!1,S.value=!1,C.value=null,D.value=""},onError:()=>{y.value=!1},onFinish:()=>{y.value=!1}}))},Y=()=>{S.value=!1,C.value=null,D.value="",y.value=!1},Z=h(()=>D.value?`Are you sure you want to delete inventory for "${D.value}"?`:"Are you sure you want to delete this inventory item?"),ee=()=>{m.visit(v.create.url())},te=l=>{m.visit(v.show.url(l)+"?action=adjust")},se=()=>{m.visit(v.lowStock.url())},le=()=>{m.visit(v.stockMovements.url())},L=h(()=>{let l=0;return i.value.stockStatus&&i.value.stockStatus.length>0&&l++,i.value.location&&i.value.location.length>0&&l++,l}),M=(l=!0)=>{const e={};i.value.stockStatus&&i.value.stockStatus.length>0&&(e.stock_status=i.value.stockStatus),i.value.location&&i.value.location.length>0&&(e.location=i.value.location),_.value&&(e.search=_.value),m.get(v.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{l&&(w.value=!1)}})},oe=()=>{i.value={stockStatus:[],location:[]},_.value="",m.get(v.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1}})},ae=()=>{f.value.length!==0&&(I.value=!0,x.value=!1)},ie=()=>{if(f.value.length===0)return;x.value=!0;const l=f.value.map(e=>e.id);m.post(v.bulkDelete.url(),{ids:l},{preserveScroll:!0,onSuccess:()=>{x.value=!1,I.value=!1,f.value=[]},onError:()=>{x.value=!1},onFinish:()=>{x.value=!1}})},re=()=>{I.value=!1,x.value=!1},ne=h(()=>{const l=f.value.length;return l===0?"":`Are you sure you want to delete ${l} ${l===1?"inventory item":"inventory items"}?`}),B=h(()=>f.value&&f.value.length>0),O=l=>l.available_quantity<=0?{label:"Out of Stock",severity:"danger"}:l.is_low_stock?{label:"Low Stock",severity:"warning"}:{label:"In Stock",severity:"success"};return(l,e)=>{const A=ue("tooltip");return n(),c(pe,null,[o(a(de),{title:"Inventory"}),o(fe,{title:"Inventory",breadcrumbs:W.value},{default:u(()=>[t("div",xe,[t("div",ge,[t("div",he,[e[8]||(e[8]=t("i",{class:"pi pi-search search-icon"},null,-1)),o(a(be),{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),placeholder:"Search",class:"w-full",onKeyup:ce(M,["enter"])},null,8,["modelValue"])]),t("div",ke,[o(a(g),{label:"Low Stock",icon:"pi pi-exclamation-triangle",severity:"warning",outlined:"",class:"flex-shrink-0",onClick:se}),o(a(g),{label:"Stock Movements",icon:"pi pi-list",severity:"info",outlined:"",class:"flex-shrink-0",onClick:le}),t("div",_e,[B.value?(n(),R(a(g),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:ae})):V("",!0),B.value?(n(),c("span",we,r(f.value.length),1)):V("",!0)]),t("div",Se,[o(a(g),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=s=>w.value=!0)}),L.value>0?(n(),c("span",Ce,r(L.value),1)):V("",!0)]),o(a(g),{label:"Add Inventory",icon:"pi pi-plus",severity:"primary",onClick:ee,class:"flex-shrink-0"})])]),t("div",De,[t("div",Ie,[e[9]||(e[9]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Total Items",-1)),t("div",Le,r(k.statistics.total_items||0),1)]),t("div",Ae,[e[10]||(e[10]=t("div",{class:"text-sm text-muted-foreground mb-1"},"In Stock",-1)),t("div",Ve,r(k.statistics.in_stock||0),1)]),t("div",$e,[e[11]||(e[11]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Out of Stock",-1)),t("div",Fe,r(k.statistics.out_of_stock||0),1)]),t("div",je,[e[12]||(e[12]=t("div",{class:"text-sm text-muted-foreground mb-1"},"Low Stock",-1)),t("div",Ne,r(k.statistics.low_stock||0),1)])]),t("div",Pe,[t("div",Me,[P.value.length===0?(n(),c("div",Be,[...e[13]||(e[13]=[t("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),t("p",{class:"text-gray-500"},"No inventory items found",-1)])])):(n(),R(a(me),{key:1,value:P.value,paginator:!0,rows:F.value,rowsPerPageOptions:[5,10,20,50],selection:f.value,"onUpdate:selection":e[2]||(e[2]=s=>f.value=s),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["product.name","product.sku","location"],onPage:z},{default:u(()=>[o(a(b),{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(a(b),{header:"#",style:{width:"60px"}},{body:u(s=>[t("div",Oe,[t("span",Re,r(Q(s.index)),1)])]),_:1}),o(a(b),{field:"product.name",header:"Product",sortable:!0},{body:u(s=>[t("div",Ue,[t("span",qe,r(s.data.product?.name||"N/A"),1),t("span",Ee,r(s.data.product?.sku||"N/A"),1)])]),_:1}),o(a(b),{field:"location",header:"Location",sortable:!0,style:{width:"120px"}},{body:u(s=>[o(a(q),{value:s.data.location||"main",severity:"info"},null,8,["value"])]),_:1}),o(a(b),{header:"Quantity",style:{width:"100px"}},{body:u(s=>[t("div",Te,[t("span",Ke,r(s.data.quantity),1),t("span",We,"Available: "+r(s.data.available_quantity),1)])]),_:1}),o(a(b),{header:"Reserved",style:{width:"100px"}},{body:u(s=>[t("span",Qe,r(s.data.reserved_quantity||0),1)]),_:1}),o(a(b),{header:"Status",style:{width:"120px"}},{body:u(s=>[o(a(q),{value:O(s.data).label,severity:O(s.data).severity},null,8,["value","severity"])]),_:1}),o(a(b),{header:"Cost Price",style:{width:"120px"}},{body:u(s=>[s.data.cost_price?(n(),c("span",ze," $"+r(parseFloat(s.data.cost_price).toFixed(2)),1)):(n(),c("span",Ge,"N/A"))]),_:1}),o(a(b),{header:"Actions",style:{width:"150px"}},{body:u(s=>[t("div",He,[$((n(),c("button",{onClick:j=>G(s.data.id),class:"text-gray-600 cursor-pointer"},[...e[14]||(e[14]=[t("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Je)),[[A,"View",void 0,{top:!0}]]),$((n(),c("button",{onClick:j=>H(s.data.id),class:"text-blue-600 cursor-pointer"},[...e[15]||(e[15]=[t("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Xe)),[[A,"Edit",void 0,{top:!0}]]),$((n(),c("button",{onClick:j=>te(s.data.id),class:"text-green-600 cursor-pointer"},[...e[16]||(e[16]=[t("i",{class:"pi pi-plus-minus text-sm"},null,-1)])],8,Ye)),[[A,"Adjust Stock",void 0,{top:!0}]]),$((n(),c("button",{onClick:j=>J(s.data.id,s.data.product?.name),class:"text-red-600 cursor-pointer"},[...e[17]||(e[17]=[t("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Ze)),[[A,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),o(E,{visible:S.value,"onUpdate:visible":e[3]||(e[3]=s=>S.value=s),title:"Delete Inventory",message:Z.value,loading:y.value,onConfirm:X,onCancel:Y},null,8,["visible","message","loading"]),o(E,{visible:I.value,"onUpdate:visible":e[4]||(e[4]=s=>I.value=s),title:"Delete Inventory Items",message:ne.value,loading:x.value,onConfirm:ie,onCancel:re},null,8,["visible","message","loading"]),o(a(ye),{visible:w.value,"onUpdate:visible":e[7]||(e[7]=s=>w.value=s),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:u(()=>[...e[18]||(e[18]=[t("div",{class:"flex items-center justify-between w-full pr-8"},[t("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:u(()=>[t("div",ot,[o(a(g),{label:"Reset",severity:"secondary",outlined:"",onClick:oe}),o(a(g),{label:"Apply Filters",severity:"primary",onClick:M})])]),default:u(()=>[t("div",et,[t("div",tt,[e[19]||(e[19]=t("label",{class:"text-sm font-medium text-gray-700"},"Stock Status",-1)),o(a(U),{modelValue:i.value.stockStatus,"onUpdate:modelValue":e[5]||(e[5]=s=>i.value.stockStatus=s),options:T,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),t("div",st,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-700"},"Location",-1)),o(a(U),{modelValue:i.value.location,"onUpdate:modelValue":e[6]||(e[6]=s=>i.value.location=s),options:K,optionLabel:"label",optionValue:"value",placeholder:"Select Location",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),L.value>0?(n(),c("div",lt,[e[21]||(e[21]=t("i",{class:"pi pi-info-circle mr-2"},null,-1)),ve(" "+r(L.value)+" "+r(L.value===1?"filter":"filters")+" active ",1)])):V("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{$t as default};

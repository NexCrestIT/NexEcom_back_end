import{r as o,c as x,q as se,a as u,o as r,b as a,d as i,h as ae,e as d,f as l,s as ie,k as U,j as b,t as p,x as oe,v as L,i as re,F as ne,p as f}from"./app-CsZvk_OI.js";import{T as c,_ as ue}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-CfI51x6S.js";import{s as de,a as y}from"./index-CnIfW9D3.js";import{s as T}from"./index-BYFlyxjJ.js";import{s as ce}from"./index-1iZKgu-n.js";import{s as ve}from"./index-pi8ETc4C.js";import{s as pe}from"./index-GZrV6j6J.js";import{s as fe}from"./index-DiTkXXI1.js";import{_ as R}from"./DeleteConfirmationModal-tofwjkE9.js";import"./index-BqkInGoY.js";import"./useForwardExpose-CrRxdZzL.js";import"./VisuallyHidden-DGCGjvMv.js";import"./RovingFocusGroup-CF8qITZY.js";import"./createLucideIcon-3cHpo18T.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-DLpk5Ssm.js";import"./index-B7hmJaUz.js";import"./index-Bzv5bibZ.js";import"./index-D_ZR9ELe.js";import"./index-DbgxBhcK.js";import"./index-BGq02r0v.js";import"./index-no0rzq44.js";import"./index-CCICK8-f.js";import"./index-Cy9aq3qC.js";import"./index-Bfmys3hZ.js";const me={class:"flex flex-col gap-6 p-6"},ge={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},he={class:"w-full sm:w-auto search-input-wrapper"},xe={class:"flex gap-2"},be={class:"relative inline-block"},ye={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},_e={class:"relative inline-block"},we={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center shadow-lg border-2 border-white",style:{"min-width":"1.25rem"}},ke={class:"data-table-container"},Se={class:"overflow-x-auto"},Ce={key:0,class:"text-center py-12"},De={class:"flex items-center h-full"},Ae={class:"text-sm text-gray-600"},Te={class:"flex items-center h-full gap-2"},Ve=["title"],$e={class:"flex flex-col"},Fe={class:"font-medium text-gray-900"},Le={key:0,class:"text-xs text-gray-500 truncate max-w-xs"},Ne={class:"text-xs bg-gray-100 px-2 py-1 rounded"},je={class:"flex items-center gap-3"},Be=["onClick"],Pe=["onClick"],Ue=["onClick"],Re={class:"flex flex-col gap-6"},Ee={class:"flex flex-col gap-2"},Me={key:0,class:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg"},Ie={class:"flex gap-2 justify-end"},ft={__name:"Index",props:{tags:{type:Array,default:()=>[]},statistics:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({is_active:null,search:null})}},setup(E){const h=E,_=o(h.filters?.search||""),n=o([]),N=o(0),V=o(10),w=o(!1),v=o({isActive:h.filters?.is_active?Array.isArray(h.filters.is_active)?h.filters.is_active:[h.filters.is_active]:[]}),M=[{label:"Active",value:!0},{label:"Inactive",value:!1}],k=o(!1),m=o(!1),S=o(null),C=o(""),D=o(!1),g=o(!1),j=x(()=>h.tags),I=x(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Tags",href:c.index.url()}]),O=s=>N.value*V.value+s+1,K=s=>{N.value=s.page,V.value=s.rows},q=s=>{f.visit(c.show.url(s))},z=s=>{f.visit(c.edit.url(s))},G=(s,e)=>{S.value=s,C.value=e,k.value=!0,m.value=!1},H=()=>{S.value&&(m.value=!0,f.delete(c.destroy.url(S.value),{preserveScroll:!0,onSuccess:()=>{m.value=!1,k.value=!1,S.value=null,C.value=""},onError:()=>{m.value=!1},onFinish:()=>{m.value=!1}}))},J=()=>{k.value=!1,S.value=null,C.value="",m.value=!1},Q=x(()=>C.value?`Are you sure you want to delete "${C.value}"?`:"Are you sure you want to delete this tag?"),W=()=>{f.visit(c.create.url())},X=s=>{f.post(c.toggleStatus.url(s),{},{preserveScroll:!0})},A=x(()=>{let s=0;return v.value.isActive&&v.value.isActive.length>0&&s++,s}),B=(s=!0)=>{const e={};v.value.isActive&&v.value.isActive.length>0&&(e.is_active=v.value.isActive),_.value&&(e.search=_.value),f.get(c.index.url(),e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{s&&(w.value=!1)}})},Y=()=>{v.value={isActive:[]},_.value="",f.get(c.index.url(),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1}})},Z=()=>{n.value.length!==0&&(D.value=!0,g.value=!1)},ee=()=>{if(n.value.length===0)return;g.value=!0;const s=n.value.map(e=>e.id);f.post(c.bulkDelete.url(),{ids:s},{preserveScroll:!0,onSuccess:()=>{g.value=!1,D.value=!1,n.value=[]},onError:()=>{g.value=!1},onFinish:()=>{g.value=!1}})},te=()=>{D.value=!1,g.value=!1},le=x(()=>{const s=n.value.length;return s===0?"":`Are you sure you want to delete ${s} ${s===1?"tag":"tags"}?`}),P=x(()=>n.value&&n.value.length>0);return(s,e)=>{const $=se("tooltip");return r(),u(ne,null,[a(i(ae),{title:"Tags"}),a(ue,{title:"Tags",breadcrumbs:I.value},{default:d(()=>[l("div",me,[l("div",ge,[l("div",he,[e[7]||(e[7]=l("i",{class:"pi pi-search search-icon"},null,-1)),a(i(ce),{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"Search",class:"w-full",onKeyup:ie(B,["enter"])},null,8,["modelValue"])]),l("div",xe,[l("div",be,[P.value?(r(),U(i(T),{key:0,label:"Delete Selected",icon:"pi pi-trash",severity:"danger",outlined:"",class:"flex-shrink-0",onClick:Z})):b("",!0),P.value?(r(),u("span",ye,p(n.value.length),1)):b("",!0)]),l("div",_e,[a(i(T),{label:"Filters",icon:"pi pi-filter",severity:"secondary",outlined:"",class:"flex-shrink-0",onClick:e[1]||(e[1]=t=>w.value=!0)}),A.value>0?(r(),u("span",we,p(A.value),1)):b("",!0)]),a(i(T),{label:"Add Tag",icon:"pi pi-plus",severity:"primary",onClick:W,class:"flex-shrink-0"})])]),l("div",ke,[l("div",Se,[j.value.length===0?(r(),u("div",Ce,[...e[8]||(e[8]=[l("i",{class:"pi pi-inbox text-4xl text-gray-400 mb-3"},null,-1),l("p",{class:"text-gray-500"},"No tags found",-1)])])):(r(),U(i(de),{key:1,value:j.value,paginator:!0,rows:V.value,rowsPerPageOptions:[5,10,20,50],selection:n.value,"onUpdate:selection":e[2]||(e[2]=t=>n.value=t),paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} to {last} of {totalRecords}",class:"p-datatable-sm",stripedRows:"",dataKey:"id",globalFilterFields:["name","description"],onPage:K},{default:d(()=>[a(i(y),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(i(y),{header:"#",style:{width:"60px"}},{body:d(t=>[l("div",De,[l("span",Ae,p(O(t.index)),1)])]),_:1}),a(i(y),{field:"name",header:"Tag Name",sortable:!0},{body:d(t=>[l("div",Te,[t.data.color?(r(),u("span",{key:0,class:"w-4 h-4 rounded border",style:oe({backgroundColor:t.data.color}),title:t.data.color},null,12,Ve)):b("",!0),l("div",$e,[l("span",Fe,p(t.data.name),1),t.data.description?(r(),u("span",Le,p(t.data.description),1)):b("",!0)])])]),_:1}),a(i(y),{field:"slug",header:"Slug",sortable:!0,style:{width:"200px"}},{body:d(t=>[l("code",Ne,p(t.data.slug),1)]),_:1}),a(i(y),{field:"is_active",header:"Status",sortable:!0,sortField:"is_active",style:{width:"120px"}},{body:d(t=>[a(i(ve),{modelValue:t.data.is_active,"onUpdate:modelValue":F=>X(t.data.id)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(i(y),{header:"Actions",style:{width:"100px"}},{body:d(t=>[l("div",je,[L((r(),u("button",{onClick:F=>q(t.data.id),class:"text-gray-600 cursor-pointer"},[...e[9]||(e[9]=[l("i",{class:"pi pi-eye text-sm"},null,-1)])],8,Be)),[[$,"View",void 0,{top:!0}]]),L((r(),u("button",{onClick:F=>z(t.data.id),class:"text-blue-600 cursor-pointer"},[...e[10]||(e[10]=[l("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,Pe)),[[$,"Edit",void 0,{top:!0}]]),L((r(),u("button",{onClick:F=>G(t.data.id,t.data.name),class:"text-red-600 cursor-pointer"},[...e[11]||(e[11]=[l("i",{class:"pi pi-trash text-sm"},null,-1)])],8,Ue)),[[$,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","rows","selection"]))])])]),a(R,{visible:k.value,"onUpdate:visible":e[3]||(e[3]=t=>k.value=t),title:"Delete Tag",message:Q.value,loading:m.value,onConfirm:H,onCancel:J},null,8,["visible","message","loading"]),a(R,{visible:D.value,"onUpdate:visible":e[4]||(e[4]=t=>D.value=t),title:"Delete Tags",message:le.value,loading:g.value,onConfirm:ee,onCancel:te},null,8,["visible","message","loading"]),a(i(pe),{visible:w.value,"onUpdate:visible":e[6]||(e[6]=t=>w.value=t),position:"right",class:"w-full sm:w-96",modal:!0,dismissable:!0},{header:d(()=>[...e[12]||(e[12]=[l("div",{class:"flex items-center justify-between w-full pr-8"},[l("h2",{class:"text-xl font-semibold"},"Filters")],-1)])]),footer:d(()=>[l("div",Ie,[a(i(T),{label:"Reset",severity:"secondary",outlined:"",onClick:Y}),a(i(T),{label:"Apply Filters",severity:"primary",onClick:B})])]),default:d(()=>[l("div",Re,[l("div",Ee,[e[13]||(e[13]=l("label",{class:"text-sm font-medium text-gray-700"},"Status",-1)),a(i(fe),{modelValue:v.value.isActive,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value.isActive=t),options:M,optionLabel:"label",optionValue:"value",placeholder:"Select Status",class:"w-full",display:"chip",showClear:!0},null,8,["modelValue"])]),A.value>0?(r(),u("div",Me,[e[14]||(e[14]=l("i",{class:"pi pi-info-circle mr-2"},null,-1)),re(" "+p(A.value)+" "+p(A.value===1?"filter":"filters")+" active ",1)])):b("",!0)])]),_:1},8,["visible"])]),_:1},8,["breadcrumbs"])],64)}}};export{ft as default};

import{r as $,u as U,c as E,m as F,a as m,o as c,b as o,d as s,h as L,e as r,f as t,t as i,j as S,g as P,i as A,n as x,F as T,p as j}from"./app-g_uq3P9Q.js";import{I as v,_ as B}from"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-DjP68X9r.js";import{s as y}from"./index-B_MRzLld.js";import{s as h}from"./index-DI7avG2Q.js";import{s as R,a as u}from"./index-CSEaDcPC.js";import{s as O}from"./index-CZBIT8sJ.js";import{s as M}from"./index-C3A8jhMi.js";import{s as Q}from"./index-BR1BcU9Z.js";import{s as N}from"./index-CUnQWY_e.js";import{_ as g}from"./InputError.vue_vue_type_script_setup_true_lang-C66E4Wtv.js";import"./index-dWEWYs2j.js";import"./useForwardExpose-CxWsbAvG.js";import"./VisuallyHidden-BIE4ZmuB.js";import"./RovingFocusGroup-DoPalDKS.js";import"./createLucideIcon-Cn-To4t-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BLtObZYw.js";import"./index-CFvIkJt3.js";import"./index-Diih4kcu.js";import"./index-CPL-5HGm.js";import"./index-DqafScSn.js";import"./index-DW7toPKJ.js";import"./index-DA5wfV1C.js";import"./index-Cnk_WgH2.js";import"./index-KNfTspns.js";import"./index-AOL12p5l.js";const z={class:"flex flex-col gap-6 p-6"},H={class:"flex flex-wrap items-center justify-between gap-4"},K={class:"flex items-center gap-2 mb-2"},G={class:"text-2xl font-bold"},J={class:"flex items-center gap-2"},W={class:"text-sm bg-muted px-2 py-1 rounded"},X={class:"flex gap-2"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Z={class:"lg:col-span-2 space-y-6"},tt={class:"rounded-lg border border-border bg-card p-6"},et={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},st={class:"mt-1 text-2xl font-bold"},ot={class:"mt-1 text-2xl font-bold text-yellow-600"},lt={class:"mt-1 text-2xl font-bold text-green-600"},nt={class:"mt-1 text-lg"},at={class:"mt-4 grid grid-cols-2 gap-4"},it={class:"mt-1 text-lg font-medium"},rt={class:"mt-1 text-lg"},dt={key:0,class:"mt-4"},ut={class:"mt-1 text-lg"},mt={key:1,class:"mt-4"},ct={class:"mt-1 text-sm"},vt={key:0,class:"rounded-lg border border-border bg-card p-6"},yt={class:"font-medium"},pt={class:"text-sm"},ft={class:"text-sm font-medium"},bt={class:"text-sm"},xt={class:"text-sm"},gt={class:"text-sm"},ht={key:1,class:"rounded-lg border border-border bg-card p-6"},kt={class:"space-y-6"},_t={class:"rounded-lg border border-border bg-card p-6"},wt={class:"space-y-3"},St={class:"mt-1 font-medium"},At={class:"mt-1"},jt={class:"mt-1"},Nt={class:"rounded-lg border border-border bg-card p-6"},Vt={class:"space-y-3"},qt={class:"mt-1 text-sm"},Dt={class:"mt-1 text-sm"},It={class:"flex flex-col gap-2"},Ct={class:"flex flex-col gap-2"},$t={class:"text-muted-foreground"},Ut={class:"flex flex-col gap-2"},Et={class:"flex flex-col gap-2"},Ft={class:"flex justify-end gap-2 mt-4"},de={__name:"Show",props:{inventory:{type:Object,required:!0}},setup(n){const d=n,p=$(!1),a=U({quantity:0,type:"adjustment",reason:"",notes:""}),V=[{label:"Stock In",value:"in"},{label:"Stock Out",value:"out"},{label:"Adjustment",value:"adjustment"}],q=E(()=>[{title:"Dashboard",href:"/dashboard"},{title:"Inventory",href:v.index.url()},{title:d.inventory.product?.name||"Inventory",href:v.show.url(d.inventory.id)}]),f=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",k=()=>d.inventory.available_quantity<=0?{label:"Out of Stock",severity:"danger"}:d.inventory.is_low_stock?{label:"Low Stock",severity:"warning"}:{label:"In Stock",severity:"success"},D=()=>{j.visit(v.edit.url(d.inventory.id))},I=()=>{confirm("Are you sure you want to delete this inventory item?")&&j.delete(v.destroy.url(d.inventory.id))},_=()=>{a.reset(),a.quantity=0,a.type="adjustment",p.value=!0},w=()=>{p.value=!1,a.reset()},C=()=>{a.post(v.adjustStock.url(d.inventory.id),{preserveScroll:!0,onSuccess:()=>{w()}})};return F(()=>{new URLSearchParams(window.location.search).get("action")==="adjust"&&_()}),(b,e)=>(c(),m(T,null,[o(s(L),{title:n.inventory.product?.name||"Inventory"},null,8,["title"]),o(B,{title:n.inventory.product?.name||"Inventory",breadcrumbs:q.value},{default:r(()=>[t("div",z,[t("div",H,[t("div",null,[t("div",K,[t("h1",G,i(n.inventory.product?.name||"Inventory"),1),o(s(h),{value:k().label,severity:k().severity},null,8,["value","severity"])]),t("div",J,[t("code",W,i(n.inventory.product?.sku||"N/A"),1),o(s(h),{value:n.inventory.location||"main",severity:"info"},null,8,["value"])])]),t("div",X,[o(s(y),{label:"Adjust Stock",icon:"pi pi-plus-minus",severity:"success",onClick:_}),o(s(y),{label:"Edit",icon:"pi pi-pencil",severity:"info",onClick:D}),o(s(y),{label:"Delete",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:I})])]),t("div",Y,[t("div",Z,[t("div",tt,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold mb-4"},"Stock Information",-1)),t("div",et,[t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm text-muted-foreground"},"Total Quantity",-1)),t("p",st,i(n.inventory.quantity),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm text-muted-foreground"},"Reserved",-1)),t("p",ot,i(n.inventory.reserved_quantity||0),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm text-muted-foreground"},"Available",-1)),t("p",lt,i(n.inventory.available_quantity),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm text-muted-foreground"},"Low Stock Threshold",-1)),t("p",nt,i(n.inventory.low_stock_threshold||"N/A"),1)])]),t("div",at,[t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm text-muted-foreground"},"Cost Price",-1)),t("p",it,i(n.inventory.cost_price?`$${parseFloat(n.inventory.cost_price).toFixed(2)}`:"N/A"),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"text-sm text-muted-foreground"},"Batch Number",-1)),t("p",rt,i(n.inventory.batch_number||"N/A"),1)])]),n.inventory.expiry_date?(c(),m("div",dt,[e[11]||(e[11]=t("label",{class:"text-sm text-muted-foreground"},"Expiry Date",-1)),t("p",ut,i(f(n.inventory.expiry_date)),1)])):S("",!0),n.inventory.notes?(c(),m("div",mt,[e[12]||(e[12]=t("label",{class:"text-sm text-muted-foreground"},"Notes",-1)),t("p",ct,i(n.inventory.notes),1)])):S("",!0)]),n.inventory.stock_movements&&n.inventory.stock_movements.length>0?(c(),m("div",vt,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4"},"Stock Movement History",-1)),o(s(R),{value:n.inventory.stock_movements,class:"p-datatable-sm",stripedRows:""},{default:r(()=>[o(s(u),{field:"type",header:"Type",style:{width:"120px"}},{body:r(l=>[o(s(h),{value:l.data.type_label||l.data.type,severity:l.data.type==="in"?"success":l.data.type==="out"?"danger":"info"},null,8,["value","severity"])]),_:1}),o(s(u),{field:"quantity",header:"Quantity",style:{width:"100px"}},{body:r(l=>[t("span",yt,i(l.data.quantity),1)]),_:1}),o(s(u),{header:"Before",style:{width:"100px"}},{body:r(l=>[t("span",pt,i(l.data.quantity_before),1)]),_:1}),o(s(u),{header:"After",style:{width:"100px"}},{body:r(l=>[t("span",ft,i(l.data.quantity_after),1)]),_:1}),o(s(u),{field:"reason",header:"Reason",style:{width:"150px"}},{body:r(l=>[t("span",bt,i(l.data.reason||"N/A"),1)]),_:1}),o(s(u),{field:"user.name",header:"User",style:{width:"120px"}},{body:r(l=>[t("span",xt,i(l.data.user?.name||"System"),1)]),_:1}),o(s(u),{field:"created_at",header:"Date",style:{width:"150px"}},{body:r(l=>[t("span",gt,i(f(l.data.created_at)),1)]),_:1})]),_:1},8,["value"])])):(c(),m("div",ht,[...e[15]||(e[15]=[t("p",{class:"text-gray-500 text-center"},"No stock movements recorded",-1)])]))]),t("div",kt,[t("div",_t,[e[19]||(e[19]=t("h2",{class:"text-lg font-semibold mb-4"},"Product Information",-1)),t("div",wt,[t("div",null,[e[16]||(e[16]=t("label",{class:"text-sm text-muted-foreground"},"Product Name",-1)),t("p",St,i(n.inventory.product?.name||"N/A"),1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm text-muted-foreground"},"SKU",-1)),t("p",At,i(n.inventory.product?.sku||"N/A"),1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-sm text-muted-foreground"},"Location",-1)),t("p",jt,i(n.inventory.location||"main"),1)])])]),t("div",Nt,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold mb-4"},"Timestamps",-1)),t("div",Vt,[t("div",null,[e[20]||(e[20]=t("label",{class:"text-sm text-muted-foreground"},"Created At",-1)),t("p",qt,i(f(n.inventory.created_at)),1)]),t("div",null,[e[21]||(e[21]=t("label",{class:"text-sm text-muted-foreground"},"Updated At",-1)),t("p",Dt,i(f(n.inventory.updated_at)),1)])])])])])]),o(s(O),{visible:p.value,"onUpdate:visible":e[4]||(e[4]=l=>p.value=l),modal:"",header:"Adjust Stock",style:{width:"500px"},closable:!0},{default:r(()=>[t("form",{onSubmit:P(C,["prevent"]),class:"flex flex-col gap-4"},[t("div",It,[e[23]||(e[23]=t("label",{class:"text-sm font-medium"},[A("Type "),t("span",{class:"text-red-500"},"*")],-1)),o(s(Q),{modelValue:s(a).type,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).type=l),options:V,optionLabel:"label",optionValue:"value",class:x([{"p-invalid":s(a).errors.type},"w-full"])},null,8,["modelValue","class"]),o(g,{message:s(a).errors.type},null,8,["message"])]),t("div",Ct,[e[24]||(e[24]=t("label",{class:"text-sm font-medium"},[A("Quantity "),t("span",{class:"text-red-500"},"*")],-1)),o(s(M),{modelValue:s(a).quantity,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).quantity=l),min:s(a).type==="out"?1:0,class:x([{"p-invalid":s(a).errors.quantity},"w-full"])},null,8,["modelValue","min","class"]),t("small",$t,i(s(a).type==="in"?"Positive number to add stock":s(a).type==="out"?"Positive number to remove stock":"Positive or negative number to adjust"),1),o(g,{message:s(a).errors.quantity},null,8,["message"])]),t("div",Ut,[e[25]||(e[25]=t("label",{class:"text-sm font-medium"},"Reason",-1)),o(s(N),{modelValue:s(a).reason,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).reason=l),placeholder:"Enter reason for adjustment...",rows:"2",class:x([{"p-invalid":s(a).errors.reason},"w-full"])},null,8,["modelValue","class"]),o(g,{message:s(a).errors.reason},null,8,["message"])]),t("div",Et,[e[26]||(e[26]=t("label",{class:"text-sm font-medium"},"Notes",-1)),o(s(N),{modelValue:s(a).notes,"onUpdate:modelValue":e[3]||(e[3]=l=>s(a).notes=l),placeholder:"Enter notes...",rows:"2",class:x([{"p-invalid":s(a).errors.notes},"w-full"])},null,8,["modelValue","class"]),o(g,{message:s(a).errors.notes},null,8,["message"])]),t("div",Ft,[o(s(y),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:w}),o(s(y),{type:"submit",label:"Adjust Stock",icon:"pi pi-check",loading:s(a).processing},null,8,["loading"])])],32)]),_:1},8,["visible"])]),_:1},8,["title","breadcrumbs"])],64))}};export{de as default};
